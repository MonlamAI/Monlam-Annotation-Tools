<!doctype html>
<html>

<head>
  <meta data-n-head="1" charset="utf-8">
  <meta data-n-head="1" name="viewport" content="width=device-width,initial-scale=1">
  <meta data-n-head="1" data-hid="description" name="description"
    content="Monlam Tools - ‡Ωò‡Ωº‡Ωì‡ºã‡Ω£‡Ωò‡ºã annotation tools for Tibetan language AI">
  <title>Monlam Tools</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon.png">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon.png">
  <link rel="preload" href="/static/_nuxt/08fba5f.js" as="script">
  <link rel="preload" href="/static/_nuxt/132fcbd.js" as="script">
  <link rel="preload" href="/static/_nuxt/50aa8ea.js" as="script">
  <link rel="preload" href="/static/_nuxt/bd0aa1f.js" as="script">
  <style>
    /* Monlam Tools Custom Branding */
    :root {
      --monlam-gold: #B8963E;
      --monlam-gold-dark: #9A7B32;
      --monlam-navy: #1a1a2e;
      --monlam-font: 'MonlamTBslim', 'Noto Sans Tibetan', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    .navbar.is-primary {
      background-color: var(--monlam-navy) !important;
    }

    .button.is-primary {
      background-color: var(--monlam-gold) !important;
      border-color: var(--monlam-gold) !important;
    }

    .button.is-primary:hover {
      background-color: var(--monlam-gold-dark) !important;
    }

    a.has-text-primary {
      color: var(--monlam-gold) !important;
    }

    .tag.is-primary {
      background-color: var(--monlam-gold) !important;
    }

    .menu-list a.is-active {
      background-color: var(--monlam-gold) !important;
    }

    .progress.is-primary::-webkit-progress-value {
      background-color: var(--monlam-gold) !important;
    }

    .tabs.is-toggle li.is-active a {
      background-color: var(--monlam-gold) !important;
      border-color: var(--monlam-gold) !important;
    }

    .pagination-link.is-current {
      background-color: var(--monlam-gold) !important;
      border-color: var(--monlam-gold) !important;
    }

    /* Hide GitHub button and link */
    a[href*="github.com"],
    a[href*="GITHUB"],
    button[class*="github"],
    .github-button {
      display: none !important;
    }

    /* ========================================
         MonlamTBslim FONT - Roboto deleted from build
         ======================================== */

    /* Primary MonlamTBslim font-face */
    @font-face {
      font-family: 'MonlamTBslim';
      src: local('MonlamTBslim'),
        url('/static/fonts/MonlamTBslim.woff2') format('woff2'),
        url('/static/fonts/MonlamTBslim.woff') format('woff'),
        url('/static/fonts/MonlamTBslim.ttf') format('truetype');
      font-weight: 100 900;
      font-style: normal;
      font-display: swap;
    }

    /* Roboto fallback - when Roboto is requested, use MonlamTBslim */
    @font-face {
      font-family: 'Roboto';
      src: local('MonlamTBslim'),
        url('/static/fonts/MonlamTBslim.woff2') format('woff2'),
        url('/static/fonts/MonlamTBslim.woff') format('woff'),
        url('/static/fonts/MonlamTBslim.ttf') format('truetype');
      font-weight: 100 900;
      font-style: normal;
      font-display: swap;
    }

    /* Apply MonlamTBslim everywhere */
    *,
    *::before,
    *::after {
      font-family: var(--monlam-font) !important;
    }

    /* Fix Tibetan vowel marks (‡Ω≤ ‡Ω¥) being cut off - need extra line-height */
    html,
    html body,
    html body *,
    .v-application,
    .v-application *,
    .v-btn,
    .v-list-item,
    .v-menu__content,
    .v-select__selection,
    .v-toolbar__title,
    .v-tab,
    label,
    span,
    p,
    div,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      line-height: 1.8 !important;
    }

    /* Extra padding for menu items and buttons */
    .v-btn {
      padding-top: 4px !important;
      padding-bottom: 4px !important;
      min-height: 40px !important;
    }

    .v-list-item {
      min-height: 48px !important;
      padding-top: 8px !important;
      padding-bottom: 8px !important;
    }

    .v-tab {
      padding-top: 8px !important;
      padding-bottom: 8px !important;
    }

    .v-chip {
      height: auto !important;
      min-height: 32px !important;
      padding-top: 4px !important;
      padding-bottom: 4px !important;
    }

    .v-text-field input,
    .v-text-field textarea {
      padding-top: 8px !important;
      padding-bottom: 8px !important;
      line-height: 1.8 !important;
    }

  </style>
</head>

<body>
  <div id="__nuxt">
    <style>
      #nuxt-loading {
        background: #fff;
        visibility: hidden;
        opacity: 0;
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        animation: nuxtLoadingIn 10s ease;
        -webkit-animation: nuxtLoadingIn 10s ease;
        animation-fill-mode: forwards;
        overflow: hidden
      }

      @keyframes nuxtLoadingIn {
        0% {
          visibility: hidden;
          opacity: 0
        }

        20% {
          visibility: visible;
          opacity: 0
        }

        100% {
          visibility: visible;
          opacity: 1
        }
      }

      @-webkit-keyframes nuxtLoadingIn {
        0% {
          visibility: hidden;
          opacity: 0
        }

        20% {
          visibility: visible;
          opacity: 0
        }

        100% {
          visibility: visible;
          opacity: 1
        }
      }

      #nuxt-loading>div,
      #nuxt-loading>div:after {
        border-radius: 50%;
        width: 5rem;
        height: 5rem
      }

      #nuxt-loading>div {
        font-size: 10px;
        position: relative;
        text-indent: -9999em;
        border: .5rem solid #f5f5f5;
        border-left: .5rem solid #B8963E;
        -webkit-transform: translateZ(0);
        -ms-transform: translateZ(0);
        transform: translateZ(0);
        -webkit-animation: nuxtLoading 1.1s infinite linear;
        animation: nuxtLoading 1.1s infinite linear
      }

      #nuxt-loading.error>div {
        border-left: .5rem solid #ff4500;
        animation-duration: 5s
      }

      @-webkit-keyframes nuxtLoading {
        0% {
          -webkit-transform: rotate(0);
          transform: rotate(0)
        }

        100% {
          -webkit-transform: rotate(360deg);
          transform: rotate(360deg)
        }
      }

      @keyframes nuxtLoading {
        0% {
          -webkit-transform: rotate(0);
          transform: rotate(0)
        }

        100% {
          -webkit-transform: rotate(360deg);
          transform: rotate(360deg)
        }
      }
    </style>
    <script>window.addEventListener("error", function () { var e = document.getElementById("nuxt-loading"); e && (e.className += " error") })</script>
    <div id="nuxt-loading" aria-live="polite" role="status">
      <div>Loading...</div>
    </div>
  </div>
  <script>window.__NUXT__ = { config: { _app: { basePath: "/", assetsPath: "/static/_nuxt/", cdnURL: null } } }</script>
  <script>
    // Tibetan translations for Monlam Tools (Doccano)
    const translations = {
      // Home page
      'Text Annotation for Humans': '‡Ωû‡Ω¥‡ºã‡Ωë‡ΩÇ‡ºã‡Ωñ‡æ±‡ºã‡Ω°‡Ω¥‡Ω£‡ºç',
      'Get Started': '‡Ω†‡ΩÇ‡Ωº‡ºã‡Ωñ‡Ω¢‡æ©‡Ωò‡Ω¶‡ºç',
      'GET STARTED': '‡Ω†‡ΩÇ‡Ωº‡ºã‡Ωñ‡Ω¢‡æ©‡Ωò‡Ω¶‡ºç',
      'The best features': '‡Ωë‡Ωò‡Ω≤‡ΩÇ‡Ω¶‡ºã‡Ωñ‡Ω¶‡Ω£‡ºã‡ΩÅ‡æ±‡Ωë‡ºã‡ΩÜ‡Ωº‡Ω¶‡ºç',
      'Team Collaboration': '‡Ωö‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ωî‡Ω†‡Ω≤‡ºã‡Ωò‡Ωâ‡Ωò‡ºã‡Ω£‡Ω¶‡ºç',
      'Annotation with your team mates': '‡ΩÅ‡æ±‡Ωº‡Ωë‡ºã‡ΩÄ‡æ±‡Ω≤‡ºã‡Ω£‡Ω¶‡ºã‡Ω¢‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ωë‡ΩÑ‡ºã‡Ωò‡Ωâ‡Ωò‡ºã‡Ωë‡Ω¥‡ºã‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡Ωº‡Ωë‡ºç',
      'Any Language': '‡Ω¶‡æê‡Ωë‡ºã‡Ω¢‡Ω≤‡ΩÇ‡Ω¶‡ºã‡ΩÇ‡ΩÑ‡ºã‡Ω°‡ΩÑ‡ºã‡ºç',
      'Annotation with any language': '‡Ω¶‡æê‡Ωë‡ºã‡Ω¢‡Ω≤‡ΩÇ‡Ω¶‡ºã‡ΩÇ‡ΩÑ‡ºã‡Ω°‡ΩÑ‡ºã‡Ω¢‡Ω¥‡ΩÑ‡ºã‡Ωñ‡Ω†‡Ω≤‡ºã‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡Ωº‡Ωë‡ºç',
      'Open Source': '‡Ω£‡Ω¶‡ºã‡Ω¶‡æ≥‡ºã‡Ωî‡Ωº‡ºç',
      'Annotation that is free and customizable': '‡Ω¢‡Ω≤‡Ωì‡ºã‡Ωò‡Ω∫‡Ωë‡ºã‡Ωë‡ΩÑ‡ºã‡Ω¢‡ΩÑ‡ºã‡Ωò‡Ωº‡Ω¶‡ºã‡Ωñ‡Ωü‡Ωº‡ºã‡Ωñ‡ΩÖ‡Ωº‡Ω¶‡ºã‡Ωñ‡æ±‡Ω∫‡Ωë‡ºã‡Ω¢‡Ω¥‡ΩÑ‡ºã‡Ωñ‡Ω†‡Ω≤‡ºã‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡Ωº‡Ωë‡ºç',
      'Realize your ideas quickly': '‡ΩÅ‡æ±‡Ωº‡Ωë‡ºã‡ΩÄ‡æ±‡Ω≤‡ºã‡Ωñ‡Ω¶‡Ωò‡ºã‡Ωñ‡æ≥‡Ωº‡ºã‡Ωò‡ΩÇ‡æ±‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ωî‡Ωº‡Ω¢‡ºã‡Ωë‡ΩÑ‡Ωº‡Ω¶‡ºã‡Ω¶‡Ω¥‡ºã‡Ω¶‡æí‡æ≤‡Ω¥‡Ωñ‡ºç',
      'Try Demo': '‡Ωö‡Ωº‡Ωë‡ºã‡Ω£‡æü‡ºã‡Ωñ‡æ±‡Ω∫‡Ωë‡ºç',
      'TRY DEMO': '‡Ωö‡Ωº‡Ωë‡ºã‡Ω£‡æü‡ºã‡Ωñ‡æ±‡Ω∫‡Ωë‡ºç',

      // Navigation
      'Login': '‡Ωì‡ΩÑ‡ºã‡Ω†‡Ωõ‡Ω¥‡Ω£‡ºç',
      'LOGIN': '‡Ωì‡ΩÑ‡ºã‡Ω†‡Ωõ‡Ω¥‡Ω£‡ºç',
      'Sign Out': '‡Ωï‡æ±‡Ω≤‡Ω¢‡ºã‡Ω†‡Ωê‡Ωº‡Ωì‡ºç',
      'Projects': '‡Ω£‡Ω¶‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºç',
      'PROJECTS': '‡Ω£‡Ω¶‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºç',

      // Project home
      'Home': '‡Ωò‡Ωë‡Ω¥‡Ωì‡ºã‡ΩÑ‡Ωº‡Ω¶‡ºç',
      'Welcome to Doccano!': '‡Ω¶‡æê‡Ω¥‡ºã‡ΩÅ‡Ωò‡Ω¶‡ºã‡Ωñ‡Ωü‡ΩÑ‡ºã‡ºç',
      'Welcome to Monlam Tools!': '‡Ω¶‡æê‡Ω¥‡ºã‡ΩÅ‡Ωò‡Ω¶‡ºã‡Ωñ‡Ωü‡ΩÑ‡ºã‡ºç',
      'Import a dataset': '‡ΩÇ‡Ωû‡Ω≤‡ºã‡ΩÇ‡æ≤‡ΩÑ‡Ω¶‡ºã‡Ωì‡ΩÑ‡ºã‡Ω†‡Ωë‡æ≤‡Ω∫‡Ωì‡ºç',
      'Create labels for this project': '‡Ω£‡Ω¶‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºã‡Ω†‡Ωë‡Ω≤‡Ω†‡Ω≤‡ºã‡ΩÜ‡Ω∫‡Ωë‡ºã‡ΩÅ‡ºã‡Ωñ‡æ±‡ΩÑ‡ºã‡ΩÇ‡Ω¶‡Ω¢‡ºã‡Ωñ‡Ωü‡Ωº‡ºç',
      'Add members for collaborative work': '‡Ωò‡Ωâ‡Ωò‡ºã‡Ω£‡Ω¶‡ºã‡ΩÄ‡æ±‡Ω≤‡ºã‡ΩÜ‡Ω∫‡Ωë‡ºã‡Ωö‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ωò‡Ω≤‡ºã‡Ω¶‡æ£‡Ωº‡Ωì‡ºã‡Ωî‡ºç',
      'Define a guideline for the work': '‡Ω£‡Ω¶‡ºã‡ΩÄ‡Ω†‡Ω≤‡ºã‡Ω£‡Ωò‡ºã‡Ω¶‡æü‡Ωº‡Ωì‡ºã‡ΩÇ‡Ωè‡Ωì‡ºã‡Ω†‡ΩÅ‡Ω∫‡Ω£‡ºç',
      'Annotate the dataset': '‡ΩÇ‡Ωû‡Ω≤‡ºã‡ΩÇ‡æ≤‡ΩÑ‡Ω¶‡ºã‡Ω£‡ºã‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡Ωº‡Ωë‡ºç',
      'View statistics': '‡Ωö‡Ωë‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºã‡Ω£‡æü‡ºã‡Ωñ‡ºç',
      'Export the dataset': '‡ΩÇ‡Ωû‡Ω≤‡ºã‡ΩÇ‡æ≤‡ΩÑ‡Ω¶‡ºã‡Ωï‡æ±‡Ω≤‡Ω¢‡ºã‡Ω†‡Ωë‡æ≤‡Ω∫‡Ωì‡ºç',

      // Common
      'Save': '‡Ωâ‡Ω¢‡ºã‡Ωö‡ΩÇ‡Ω¶‡ºç',
      'Edit': '‡Ω¢‡æ©‡Ωº‡Ωò‡ºã‡Ω¶‡æí‡æ≤‡Ω≤‡ΩÇ',
      'Create': '‡ΩÇ‡Ω¶‡Ω¢‡ºã‡Ωñ‡Ωü‡Ωº‡ºç',
      'Cancel': '‡Ω†‡Ωë‡Ωº‡Ω¢‡ºã‡Ωñ‡ºç',
      'Close': '‡Ω¶‡æí‡Ωº‡ºã‡Ω¢‡æí‡æ±‡ΩÇ',
      'Delete': '‡Ωñ‡Ω¶‡Ω¥‡Ωñ‡ºã‡Ωî‡ºç',
      'Search': '‡Ωñ‡Ωô‡Ω£‡ºã‡Ωû‡Ω≤‡Ωñ‡ºç',
      'Import': '‡Ωì‡ΩÑ‡ºã‡Ω†‡Ωë‡æ≤‡Ω∫‡Ωì‡ºç',
      'Export': '‡Ωï‡æ±‡Ω≤‡Ω¢‡ºã‡Ω†‡Ωë‡æ≤‡Ω∫‡Ωì‡ºç',
      'Add': '‡Ω¶‡æ£‡Ωº‡Ωì‡ºã‡Ωî‡ºç',
      'Upload': '‡Ω¶‡æê‡æ±‡Ω∫‡Ω£‡ºã‡Ω†‡Ωá‡Ω¥‡ΩÇ',
      'Yes': '‡Ω°‡Ω≤‡Ωì‡ºç',
      'No': '‡Ωò‡Ω≤‡Ωì‡ºç',
      'Loading...': '‡Ω¶‡æ£‡Ωì‡ºã‡Ωñ‡Ωû‡Ω≤‡Ωì‡ºã‡Ωî‡ºç...',
      'Loading... Please wait': '‡Ω¶‡æ£‡Ωì‡ºã‡Ωñ‡Ωû‡Ω≤‡Ωì‡ºã‡Ωî‡ºç ‡Ω¶‡æí‡Ω¥‡ΩÇ‡ºã‡Ω¢‡Ωº‡ΩÇ‡Ω¶‡ºç',
      
      // Checkbox/Review tooltips
      'Checked': '‡Ωñ‡ΩÖ‡Ωº‡Ω¶‡ºã‡Ωü‡Ω≤‡Ωì‡ºã‡Ωî‡ºç',
      'Not Checked': '‡Ωñ‡ΩÖ‡Ωº‡Ω¶‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºã‡Ωî‡ºç',
      'Not checked': '‡Ωñ‡ΩÖ‡Ωº‡Ω¶‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºã‡Ωî‡ºç',
      'not checked': '‡Ωñ‡ΩÖ‡Ωº‡Ω¶‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºã‡Ωî‡ºç',
      'Done': '‡ΩÇ‡æ≤‡Ω¥‡Ωñ‡ºã‡Ωü‡Ω≤‡Ωì‡ºã‡Ωî‡ºç',
      'Undone': '‡Ωò‡ºã‡ΩÇ‡æ≤‡Ω¥‡Ωñ‡ºã‡Ωî‡ºç',
      'All': '‡Ωö‡ΩÑ‡ºã‡Ωò‡ºç',
      // Fix broken patterns
      '‡Ωò‡Ω≤‡Ωì‡ºçt ‡Ωñ‡ΩÖ‡Ωº‡Ω¶‡ºã‡Ωü‡Ω≤‡Ωì‡ºã‡Ωî‡ºç': '‡Ωñ‡ΩÖ‡Ωº‡Ω¶‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºã‡Ωî‡ºç',
      '‡Ωò‡Ω≤‡Ωì‡ºçt': '‡Ωò‡Ω≤‡Ωì‡ºç',

      // Labels/Annotation
      'Labels': '‡ΩÅ‡ºã‡Ωñ‡æ±‡ΩÑ‡ºã‡ºç',
      'Dataset': '‡ΩÇ‡Ωû‡Ω≤‡ºã‡ΩÇ‡æ≤‡ΩÑ‡Ω¶‡ºç',
      'Members': '‡Ωö‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ωò‡Ω≤‡ºç',
      'Guideline': '‡Ω£‡Ωò‡ºã‡Ω¶‡æü‡Ωº‡Ωì‡ºç',
      'Statistics': '‡Ωö‡Ωë‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºç',
      'Metrics': '‡Ωö‡Ωë‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºç',
      'Settings': '‡Ω¶‡æí‡æ≤‡Ω≤‡ΩÇ‡ºã‡Ω†‡ΩÇ‡Ωº‡Ωë‡ºç',
      'Comments': '‡Ωò‡ΩÜ‡Ωì‡ºç',

      // Demo types
      'Named Entity Recognition': '‡Ωò‡Ω≤‡ΩÑ‡ºã‡Ωö‡Ω≤‡ΩÇ‡ºã‡Ωë‡Ωñ‡æ±‡Ω∫‡ºã‡Ω†‡Ωñ‡æ±‡Ω∫‡Ωë‡ºç',
      'Sentiment Analysis': '‡Ω¶‡Ω∫‡Ωò‡Ω¶‡ºã‡Ωö‡Ωº‡Ω¢‡ºã‡Ωë‡Ωñ‡æ±‡Ω∫‡ºã‡Ωû‡Ω≤‡Ωñ‡ºç',
      'Translation': '‡Ω°‡Ω≤‡ΩÇ‡ºã‡Ω¶‡æí‡æ±‡Ω¥‡Ω¢‡ºç',
      'Text to SQL': '‡Ω°‡Ω≤‡ºã‡ΩÇ‡Ω∫‡ºã‡Ωì‡Ω¶‡ºãSQL',
      'Intent Detection and Slot Filling': '‡Ωë‡Ωò‡Ω≤‡ΩÇ‡Ω¶‡ºã‡Ωñ‡Ω¶‡Ω£‡ºã‡Ω†‡Ωö‡Ωº‡Ω£‡ºã‡Ωû‡Ω≤‡Ωñ‡ºç',
      'Image Classification': '‡Ωî‡Ω¢‡ºã‡Ω¢‡Ω≤‡Ω¶‡ºã‡Ωë‡Ωñ‡æ±‡Ω∫‡ºã‡Ω†‡Ωñ‡æ±‡Ω∫‡Ωë‡ºç',
      'Image Captioning': '‡Ωî‡Ω¢‡ºã‡Ω¢‡Ω≤‡Ω¶‡ºã‡Ω†‡ΩÇ‡æ≤‡Ω∫‡Ω£‡ºã‡Ωñ‡Ω§‡Ωë‡ºç',
      'Object Detection': '‡Ωë‡ΩÑ‡Ωº‡Ω¶‡ºã‡Ωî‡Ωº‡ºã‡Ω†‡Ωö‡Ωº‡Ω£‡ºã‡Ωû‡Ω≤‡Ωñ‡ºç',
      'Polygon Segmentation': '‡Ωò‡Ωê‡Ω†‡ºã‡Ω¢‡Ω≤‡Ω¶‡ºã‡Ωë‡Ωñ‡æ±‡Ω∫‡ºã‡Ωñ‡Ωû‡ΩÇ',
      'Speech to Text': '‡Ω¶‡æê‡Ωë‡ºã‡ΩÜ‡ºã‡Ωì‡Ω¶‡ºã‡Ω°‡Ω≤‡ºã‡ΩÇ‡Ω∫‡ºç',

      // Project types
      'Text Classification': '‡Ω°‡Ω≤‡ºã‡ΩÇ‡Ω∫‡ºã‡Ωë‡Ωñ‡æ±‡Ω∫‡ºã‡Ω†‡Ωñ‡æ±‡Ω∫‡Ωë‡ºç',
      'Sequence Labeling': '‡Ωò‡Ωö‡Ωò‡Ω¶‡ºã‡Ω¢‡Ω≤‡Ω¶‡ºã‡ΩÅ‡ºã‡Ωñ‡æ±‡ΩÑ‡ºã‡ºç',
      'Sequence to sequence': '‡Ωò‡Ωö‡Ωò‡Ω¶‡ºã‡Ωì‡Ω¶‡ºã‡Ωò‡Ωö‡Ωò‡Ω¶‡ºç',

      // Doccano branding
      'doccano': 'Monlam Tools',
      'Doccano': 'Monlam Tools',
      'Monlam AI': 'Monlam Tools',

      // Copyright - fix year to 2026
      '¬© 2025 Monlam Tools': '¬© 2026 Monlam Tools',
      '¬© 2026 Monlam AI': '¬© 2026 Monlam Tools',

    };

    document.addEventListener('DOMContentLoaded', function () {
      // Update title
      document.title = 'Monlam Tools';

      // ========================================
      // Force Monlam favicon (override any Nuxt.js defaults)
      // ========================================
      function setFavicon() {
        // Remove existing favicons
        document.querySelectorAll('link[rel*="icon"]').forEach(function (link) {
          if (!link.href.includes('favicon.ico') && !link.href.includes('favicon.png')) {
            link.remove();
          }
        });

        // Ensure our favicon links exist
        const head = document.head;
        const existingIco = document.querySelector('link[href="/favicon.ico"]');
        if (!existingIco) {
          const ico = document.createElement('link');
          ico.rel = 'icon';
          ico.type = 'image/x-icon';
          ico.href = '/favicon.ico';
          head.appendChild(ico);
        }
      }
      setFavicon();

      function replaceText(element) {
        // Update title dynamically
        if (document.title.includes('doccano')) {
          document.title = 'Monlam Tools';
        }

        // Walk through all text nodes
        const walker = document.createTreeWalker(element, NodeFilter.SHOW_TEXT, null, false);
        let node;
        while (node = walker.nextNode()) {
          let text = node.nodeValue;
          let changed = false;

          // Check each translation
          for (const [eng, tib] of Object.entries(translations)) {
            if (text.includes(eng)) {
              text = text.replace(new RegExp(eng.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'), tib);
              changed = true;
            }
          }

          if (changed) {
            node.nodeValue = text;
          }
        }
      }

      // Observe DOM changes
      const observer = new MutationObserver(function (mutations) {
        mutations.forEach(function (mutation) {
          if (mutation.type === 'childList') {
            mutation.addedNodes.forEach(function (node) {
              if (node.nodeType === Node.ELEMENT_NODE) {
                replaceText(node);
              }
            });
          }
        });
      });

      observer.observe(document.body, { childList: true, subtree: true });

      // Initial replacement
      replaceText(document.body);

      // Periodic check
      setInterval(function () {
        replaceText(document.body);
        // Remove GitHub buttons/links
        document.querySelectorAll('a[href*="github"], button').forEach(function (el) {
          if (el.textContent.toLowerCase().includes('github')) {
            el.style.display = 'none';
          }
        });
      }, 1000);

      // ========================================
      // Review Button Styling: Red O / Green Check
      // ========================================
      const CLOSE_PATH = "M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z";
      const CHECK_PATH = "M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z";
      const CIRCLE_PATH = "M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z";

      function styleReviewButtons() {
        document.querySelectorAll('.v-btn--icon .v-icon svg path').forEach(function (path) {
          const d = path.getAttribute('d');
          // X icon -> Red Circle
          if (d === CLOSE_PATH) {
            path.setAttribute('d', CIRCLE_PATH);
            path.style.fill = '#f44336';
          }
          // Check icon -> Green
          else if (d === CHECK_PATH) {
            path.style.fill = '#4caf50';
          }
        });
      }

      // Run periodically to catch dynamic updates
      setInterval(styleReviewButtons, 500);
      styleReviewButtons();

      // ========================================
      // FORCE MonlamTBslim font - override Vuetify's runtime Roboto injection
      // ========================================
      const MONLAM_FONT = "'MonlamTBslim', 'Noto Sans Tibetan', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif";

      function forceMonlamFont() {
        // Override on html and body elements
        document.documentElement.style.setProperty('font-family', MONLAM_FONT, 'important');
        document.body.style.setProperty('font-family', MONLAM_FONT, 'important');

        // Override on v-application (Vuetify root)
        document.querySelectorAll('.v-application').forEach(function (el) {
          el.style.setProperty('font-family', MONLAM_FONT, 'important');
        });

        // Override all elements that Vuetify typically styles
        document.querySelectorAll('h1, h2, h3, h4, h5, h6, .display-1, .display-2, .headline, .title, .subtitle-1, .subtitle-2, .body-1, .body-2, .v-btn, .v-card, .v-list-item, .v-toolbar__title, .v-tab, span, p, div, label, input, textarea').forEach(function (el) {
          el.style.setProperty('font-family', MONLAM_FONT, 'important');
          el.style.setProperty('line-height', '1.8', 'important');
        });
      }

      // Run immediately and frequently to override Vuetify
      forceMonlamFont();
      setInterval(forceMonlamFont, 500);

      // Also run after page fully loads
      window.addEventListener('load', function () {
        forceMonlamFont();
        setTimeout(forceMonlamFont, 100);
        setTimeout(forceMonlamFont, 500);
        setTimeout(forceMonlamFont, 1000);
      });


    });
  </script>
  <script src="/static/_nuxt/08fba5f.js"></script>
  <script src="/static/_nuxt/132fcbd.js"></script>
  <script src="/static/_nuxt/50aa8ea.js"></script>
  <script src="/static/_nuxt/bd0aa1f.js"></script>
  
  <!-- FIX: Patch role translation for project_manager -->
  <script>
  (function() {
    'use strict';
    
    // Role translation map
    var roleMap = {
      'project_admin': 'Project Admin',
      'annotator': 'Annotator', 
      'annotation_approver': 'Annotation Approver',
      'project_manager': 'Project Manager'
    };
    
    // Method 1: Intercept role API responses and add translatedName
    var originalFetch = window.fetch;
    window.fetch = function() {
      return originalFetch.apply(this, arguments).then(function(response) {
        var url = arguments[0] && arguments[0].url ? arguments[0].url : arguments[0];
        if (typeof url === 'string' && url.includes('/roles')) {
          return response.clone().json().then(function(data) {
            if (Array.isArray(data)) {
              data.forEach(function(role) {
                if (role.name && roleMap[role.name]) {
                  role.translatedName = roleMap[role.name];
                }
              });
            }
            return new Response(JSON.stringify(data), response);
          }).catch(function() { return response; });
        }
        return response;
      });
    };
    
    // Method 2: Fix role dropdown text everywhere
    function fixRoleDropdown() {
      // Valid role names that should NOT be replaced
      var validRoles = ['Project Admin', 'Annotator', 'Annotation Approver', 'Project Manager',
                        'project_admin', 'annotator', 'annotation_approver', 'project_manager'];
      
      // Patterns that indicate "undefined" role (project_manager showing incorrectly)
      var undefinedPatterns = ['undefined', 'Undefined', 'No Role Defined', 'Role Defined', '‡Ωò‡Ω≤‡Ωì‡ºç'];
      
      // Helper to check if text needs fixing
      function needsFix(text) {
        // If it's already a valid role, don't fix
        if (validRoles.some(function(role) { return text === role; })) return false;
        // If it contains undefined patterns, fix it
        if (undefinedPatterns.some(function(pattern) { return text.includes(pattern); })) return true;
        // If text starts with "‡Ωò‡Ω≤‡Ωì‡ºç"
        if (text.indexOf('‡Ωò‡Ω≤‡Ωì‡ºç') === 0) return true;
        return false;
      }
      
      // Fix in list items (dropdowns)
      document.querySelectorAll('.v-list-item__title, .v-list-item__content, .v-select__selection, .v-chip__content, .v-select__selection-text').forEach(function(item) {
        var text = item.textContent.trim();
        if (needsFix(text) && item.childNodes.length <= 2) {
          var oldText = item.textContent;
          item.textContent = 'Project Manager';
          console.log('[Monlam] Fixed role: "' + oldText + '" ‚Üí "Project Manager"');
        }
      });
      
      // Fix in dropdown menus
      document.querySelectorAll('.v-menu__content .v-list-item').forEach(function(item) {
        var titleEl = item.querySelector('.v-list-item__title');
        if (titleEl && needsFix(titleEl.textContent.trim())) {
          var oldText = titleEl.textContent;
          titleEl.textContent = 'Project Manager';
          console.log('[Monlam] Fixed dropdown role: "' + oldText + '" ‚Üí "Project Manager"');
        }
      });
      
      // Extra: Fix any leaf element with exact broken pattern
      document.querySelectorAll('*').forEach(function(el) {
        if (el.children.length === 0 && el.textContent) {
          var text = el.textContent.trim();
          if (text === '‡Ωò‡Ω≤‡Ωì‡ºç Role Defined' || text === '‡Ωò‡Ω≤‡Ωì‡ºç' || text === '‡Ωò‡Ω≤‡Ωì‡ºç role defined') {
            el.textContent = 'Project Manager';
            console.log('[Monlam] Fixed exact: "' + text + '" ‚Üí "Project Manager"');
          }
        }
      });
    }
    
    document.addEventListener('DOMContentLoaded', fixRoleDropdown);
    
    var observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        if (mutation.addedNodes.length > 0) {
          setTimeout(fixRoleDropdown, 50);
          setTimeout(fixRoleDropdown, 200);
        }
      });
    });
    observer.observe(document.body, { childList: true, subtree: true });
    
    setInterval(function() {
      if (window.location.pathname.includes('/members')) {
        fixRoleDropdown();
      }
    }, 1000);
    
    // Fix broken translation patterns like "‡Ωò‡Ω≤‡Ωì‡ºçt ‡Ωñ‡ΩÖ‡Ωº‡Ω¶‡ºã‡Ωü‡Ω≤‡Ωì‡ºã‡Ωî‡ºç"
    function fixBrokenTranslations() {
      var fixes = {
        '‡Ωò‡Ω≤‡Ωì‡ºçt ‡Ωñ‡ΩÖ‡Ωº‡Ω¶‡ºã‡Ωü‡Ω≤‡Ωì‡ºã‡Ωî‡ºç': '‡Ωñ‡ΩÖ‡Ωº‡Ω¶‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºã‡Ωî‡ºç',
        '‡Ωò‡Ω≤‡Ωì‡ºçt ‡ΩÇ‡æ≤‡Ω¥‡Ωñ‡ºã‡Ωü‡Ω≤‡Ωì‡ºã‡Ωî‡ºç': '‡Ωò‡ºã‡ΩÇ‡æ≤‡Ω¥‡Ωñ‡ºã‡Ωî‡ºç',
        '‡Ωò‡Ω≤‡Ωì‡ºçt': '‡Ωò‡Ω≤‡Ωì‡ºç'
      };
      
      document.querySelectorAll('*').forEach(function(el) {
        if (el.children.length === 0 && el.textContent) {
          var text = el.textContent;
          var changed = false;
          
          Object.keys(fixes).forEach(function(broken) {
            if (text.includes(broken)) {
              text = text.replace(broken, fixes[broken]);
              changed = true;
            }
          });
          
          if (changed) {
            console.log('[Monlam] Fixed broken translation:', el.textContent, '‚Üí', text);
            el.textContent = text;
          }
        }
      });
    }
    
    setInterval(fixBrokenTranslations, 500);
    
    // Expose globally for debugging
    window.fixRoleDropdown = fixRoleDropdown;
    window.fixBrokenTranslations = fixBrokenTranslations;
    
    console.log('[Monlam] Role translation fix loaded');
  })();
  </script>
  
  <!-- Monlam Features - Inline for Maximum Reliability -->
  <script>
(function() {
    'use strict';
    
    console.log('[Monlam Inline] Features loading...');
    
    const CONFIG = {
        maxRetries: 50,
        retryDelay: 200,
        projectId: null
    };
    
    // UTILITIES
    function getProjectId() {
        const match = window.location.pathname.match(/\/projects\/(\d+)/);
        return match ? match[1] : null;
    }
    
    function waitForElement(selector, callback, retries = 0) {
        const element = document.querySelector(selector);
        if (element) {
            console.log(`[Monlam] Found element: ${selector}`);
            callback(element);
        } else if (retries < CONFIG.maxRetries) {
            setTimeout(() => waitForElement(selector, callback, retries + 1), CONFIG.retryDelay);
        } else {
            console.log(`[Monlam] Timeout waiting for: ${selector}`);
        }
    }
    
    function waitForElements(selector, callback, retries = 0) {
        const elements = document.querySelectorAll(selector);
        if (elements.length > 0) {
            console.log(`[Monlam] Found ${elements.length} elements: ${selector}`);
            callback(elements);
        } else if (retries < CONFIG.maxRetries) {
            setTimeout(() => waitForElements(selector, callback, retries + 1), CONFIG.retryDelay);
        }
    }
    
    // FEATURE 1: AUDIO AUTO-LOOP
    let audioObserver = null; // Store observer to disconnect it later
    
    function enableAudioLoop() {
        const path = window.location.pathname;
        const isAnnotationPage = path.includes('/speech-to-text') || path.match(/\/projects\/\d+\/\d+$/);
        
        // Disconnect previous observer if exists
        if (audioObserver) {
            audioObserver.disconnect();
            audioObserver = null;
        }
        
        // STOP and reset ALL audio elements when NOT on annotation page
        if (!isAnnotationPage) {
            console.log('[Monlam Audio] Not on annotation page - stopping all audio');
            document.querySelectorAll('audio[data-monlam-loop]').forEach(audio => {
                audio.pause();
                audio.currentTime = 0;
                audio.loop = false;
                audio.removeAttribute('data-monlam-loop');
            });
            return;
        }
        
        console.log('[Monlam Audio] Enabling audio loop...');
        
        function applyLoop(audio) {
            // Only apply to audio on annotation pages
            if (!audio.hasAttribute('data-monlam-loop')) {
                audio.loop = true;
                audio.setAttribute('data-monlam-loop', 'true');
                
                if (audio.readyState >= 2) {
                    audio.play().catch(e => {
                        console.log('[Monlam Audio] Auto-play blocked, waiting for interaction');
                        document.addEventListener('click', () => audio.play(), { once: true });
                    });
                } else {
                    audio.addEventListener('canplay', () => {
                        audio.play().catch(e => {
                            document.addEventListener('click', () => audio.play(), { once: true });
                        });
                    }, { once: true });
                }
                
                console.log('[Monlam Audio] Loop enabled');
            }
        }
        
        waitForElements('audio', (audioElements) => {
            audioElements.forEach(applyLoop);
        });
        
        // Only set up observer on annotation pages
        audioObserver = new MutationObserver(() => {
            document.querySelectorAll('audio:not([data-monlam-loop])').forEach(applyLoop);
        });
        audioObserver.observe(document.body, { childList: true, subtree: true });
    }
    
    // FEATURE 2: DATASET COLUMNS
    function addDatasetColumns() {
        const isDatasetPage = window.location.pathname.includes('/dataset');
        if (!isDatasetPage) return;
        
        console.log('[Monlam Dataset] Adding completion columns...');
        CONFIG.projectId = getProjectId();
        
        let assignmentData = {};
        
        fetch(`/v1/projects/${CONFIG.projectId}/assignments/`)
            .then(r => r.json())
            .then(data => {
                const assignments = data.results || data;
                assignments.forEach(a => {
                    assignmentData[a.example_id] = a;
                });
                console.log('[Monlam Dataset] Loaded', Object.keys(assignmentData).length, 'assignments');
                injectColumns();
            })
            .catch(e => console.error('[Monlam Dataset] Failed:', e));
        
        function injectColumns() {
            waitForElement('thead tr', (headerRow) => {
                if (headerRow.querySelector('.monlam-col')) return;
                
                const th = document.createElement('th');
                th.className = 'monlam-col text-start';
                th.innerHTML = '<span style="font-weight: 600;">üë§ Assigned To</span>';
                th.style.cssText = 'padding: 12px; background: #f5f5f5;';
                headerRow.appendChild(th);
                
                console.log('[Monlam Dataset] Header added');
            });
            
            // Function to process rows and add completion data
            function processRows() {
                document.querySelectorAll('tbody tr:not([data-monlam-col])').forEach(row => {
                    row.setAttribute('data-monlam-col', 'true');
                    
                    // Get example ID from Cell 1 (ID column)
                    const cells = row.querySelectorAll('td');
                    if (cells.length < 2) return;
                    
                    const exampleId = cells[1].textContent.trim();
                    if (!exampleId || !/^\d+$/.test(exampleId)) return;
                    
                    const assignment = assignmentData[exampleId];
                    
                    const td = document.createElement('td');
                    td.className = 'monlam-col text-start';
                    td.style.cssText = 'padding: 12px;';
                    
                    if (assignment) {
                        td.innerHTML = `
                            <div style="display: flex; flex-direction: column; gap: 4px;">
                                <span style="background: #2196F3; color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; display: inline-block; width: fit-content;">
                                    üìã ${assignment.status}
                                </span>
                                <span style="font-size: 10px; color: #666;">${assignment.assigned_to_username || 'N/A'}</span>
                            </div>
                        `;
                    } else {
                        td.innerHTML = '<span style="color: #999; font-size: 12px;">Not assigned</span>';
                    }
                    
                    row.appendChild(td);
                });
                
                const rowsProcessed = document.querySelectorAll('tbody tr[data-monlam-col]').length;
                if (rowsProcessed > 0) {
                    console.log('[Monlam Dataset] Processed', rowsProcessed, 'rows');
                }
            }
            
            // Set up observer for future rows
            const observer = new MutationObserver(() => {
                processRows();
            });
            
            waitForElement('tbody', (tbody) => {
                // Process existing rows first
                processRows();
                
                // Then watch for new rows
                observer.observe(tbody, { childList: true, subtree: true });
            });
        }
    }
    
    // Removed: addMetricsMatrix()
    // This was for the old /monlam/{id}/completion/ custom page
    // No longer needed since we're not redirecting to custom pages
    
    // Removed: getExampleIdFromPage(), addApproveButtons(), getCsrfToken(), isProjectAdmin()
    // These were for the approve/reject buttons that were interfering with annotation interface
    // Will be re-implemented properly in a future update
    
    // METRICS PAGE REDIRECT ONLY
    // Redirect /projects/{id}/metrics to /monlam/{id}/completion/
    // (Dataset page is NOT redirected - it uses enhanced table instead)
    function redirectMetricsPage() {
        const path = window.location.pathname;
        const match = path.match(/^\/projects\/(\d+)\/metrics/);
        
        if (match) {
            const projectId = match[1];
            const redirectUrl = `/monlam/${projectId}/completion/`;
            
            console.log('[Monlam] On metrics page, redirecting to completion dashboard:', redirectUrl);
            
            // Use location.replace for immediate redirect (can't go back)
            window.location.replace(redirectUrl);
            
            // Also set a flag to prevent Vue from loading
            sessionStorage.setItem('monlam_metrics_redirect', 'true');
        }
    }
    
    // Intercept clicks on Metrics menu item
    function interceptMetricsClick() {
        document.addEventListener('click', function(e) {
            const link = e.target.closest('a');
            if (!link) return;
            
            const href = link.getAttribute('href') || link.href;
            if (!href) return;
            
            // Check if it's a metrics link
            const match = href.match(/\/projects\/(\d+)\/metrics/);
            if (match) {
                const projectId = match[1];
                
                // Prevent default navigation
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                
                // Direct redirect
                const redirectUrl = `/monlam/${projectId}/completion/`;
                console.log('[Monlam] Intercepted metrics click, redirecting to:', redirectUrl);
                window.location.href = redirectUrl;
                
                return false;
            }
        }, true); // Use capture phase to run before Vue
    }
    
    // Removed: autoAnnotateExample() and autoStartAnnotation()
    // No longer needed since we enhance the original dataset table
    // Users just click Doccano's original Annotate button
    
    // FEATURE: ENHANCE DATASET TABLE WITH ASSIGNMENT COLUMNS
    async function enhanceDatasetTable() {
        // Check if we're on dataset page
        if (!window.location.pathname.includes('/dataset')) {
            return;
        }
        
        const projectId = getProjectId();
        if (!projectId) {
            console.log('[Monlam Dataset] No project ID found');
            return;
        }
        
        console.log('[Monlam Dataset] Enhancing dataset table for project', projectId);
        
        try {
            // Fetch current user info
            const userResp = await fetch('/v1/me');
            const currentUser = userResp.ok ? await userResp.json() : null;
            const currentUserId = currentUser ? currentUser.id : null;
            const isAdmin = currentUser ? currentUser.is_superuser : false;
            
            console.log('[Monlam Dataset] Current user:', currentUserId, 'Admin:', isAdmin);
            
            // Fetch tracking data
            const trackingResp = await fetch(`/v1/projects/${projectId}/tracking/?limit=1000`);
            const trackingData = trackingResp.ok ? await trackingResp.json() : { results: [] };
            const trackingMap = {};
            (trackingData.results || []).forEach(t => {
                trackingMap[t.example] = t;
            });
            
            // Fallback to assignments if tracking not available
            const assignResp = await fetch(`/v1/projects/${projectId}/assignments/?limit=1000`);
            const assignData = assignResp.ok ? await assignResp.json() : { results: [] };
            const assignmentMap = {};
            (assignData.results || []).forEach(a => {
                assignmentMap[a.example] = a;
            });
            
            // Fetch users
            const membersResp = await fetch(`/v1/projects/${projectId}/members`);
            const membersData = membersResp.ok ? await membersResp.json() : { results: [] };
            const userMap = {};
            (membersData.results || []).forEach(m => {
                userMap[m.user] = m.username;
            });
            
            console.log('[Monlam Dataset] Loaded', Object.keys(trackingMap).length, 'tracking records');
            
            // Wait for table to appear
            setTimeout(() => {
                // Add headers at positions 4, 5, 6 (after first 3 columns)
                const headerRow = document.querySelector('thead tr');
                if (headerRow && !headerRow.querySelector('.monlam-status-header')) {
                    const headers = Array.from(headerRow.querySelectorAll('th'));
                    
                    // Create headers
                    const annotatedHeader = document.createElement('th');
                    annotatedHeader.textContent = 'Annotated By';
                    annotatedHeader.className = 'monlam-status-header monlam-annotated-header';
                    annotatedHeader.style.cssText = 'padding: 8px; text-align: left; font-weight: 600; border-bottom: 1px solid #e0e0e0; white-space: nowrap;';
                    
                    const reviewedHeader = document.createElement('th');
                    reviewedHeader.textContent = 'Reviewed By';
                    reviewedHeader.className = 'monlam-status-header monlam-reviewed-header';
                    reviewedHeader.style.cssText = 'padding: 8px; text-align: left; font-weight: 600; border-bottom: 1px solid #e0e0e0; white-space: nowrap;';
                    
                    const statusHeader = document.createElement('th');
                    statusHeader.textContent = 'Status';
                    statusHeader.className = 'monlam-status-header monlam-status-col-header';
                    statusHeader.style.cssText = 'padding: 8px; text-align: left; font-weight: 600; border-bottom: 1px solid #e0e0e0; white-space: nowrap;';
                    
                    // Insert after the 3rd column (positions 4, 5, 6)
                    if (headers.length >= 3) {
                        const thirdHeader = headers[2];
                        // Insert in correct order: 4, 5, 6
                        thirdHeader.insertAdjacentElement('afterend', annotatedHeader);
                        annotatedHeader.insertAdjacentElement('afterend', reviewedHeader);
                        reviewedHeader.insertAdjacentElement('afterend', statusHeader);
                        console.log('[Monlam Dataset] ‚úÖ Headers inserted at positions 4, 5, 6');
                    } else {
                        // Fallback: append at end
                        headerRow.appendChild(annotatedHeader);
                        headerRow.appendChild(reviewedHeader);
                        headerRow.appendChild(statusHeader);
                        console.log('[Monlam Dataset] ‚úÖ Headers appended (less than 3 columns)');
                    }
                }
                
                // Add data cells at positions 4, 5, 6 (after first 3 cells)
                const dataRows = document.querySelectorAll('tbody tr');
                dataRows.forEach(row => {
                    if (row.querySelector('.monlam-status-cell')) return; // Already added
                    
                    // Extract example ID (first cell usually contains ID)
                    const firstCell = row.querySelector('td:first-child');
                    if (!firstCell) return;
                    
                    const idMatch = firstCell.textContent.match(/(\d+)/);
                    if (!idMatch) return;
                    
                    const exampleId = parseInt(idMatch[1]);
                    const assignment = assignmentMap[exampleId];
                    
                    // Get values
                    const annotatedBy = assignment?.assigned_to ? (userMap[assignment.assigned_to] || `User ${assignment.assigned_to}`) : '‚Äî';
                    const reviewedBy = assignment?.reviewed_by ? (userMap[assignment.reviewed_by] || `User ${assignment.reviewed_by}`) : '‚Äî';
                    const status = assignment?.status || 'unassigned';
                    
                    // Status badge colors
                    const statusColors = {
                        'assigned': '#9e9e9e',
                        'in_progress': '#2196f3',
                        'submitted': '#ff9800',
                        'approved': '#4caf50',
                        'rejected': '#f44336',
                        'unassigned': '#e0e0e0'
                    };
                    const color = statusColors[status] || '#e0e0e0';
                    const textColor = status === 'unassigned' ? '#666' : 'white';
                    
                    // Get all cells in row
                    const cells = Array.from(row.querySelectorAll('td'));
                    
                    // Create cells
                    const annotatedCell = document.createElement('td');
                    annotatedCell.className = 'monlam-annotated-cell';
                    annotatedCell.style.cssText = 'padding: 8px; border-bottom: 1px solid #e0e0e0; white-space: nowrap;';
                    annotatedCell.textContent = annotatedBy;
                    
                    const reviewedCell = document.createElement('td');
                    reviewedCell.className = 'monlam-reviewed-cell';
                    reviewedCell.style.cssText = 'padding: 8px; border-bottom: 1px solid #e0e0e0; white-space: nowrap;';
                    reviewedCell.textContent = reviewedBy;
                    
                    const statusCell = document.createElement('td');
                    statusCell.className = 'monlam-status-cell';
                    statusCell.style.cssText = 'padding: 8px; border-bottom: 1px solid #e0e0e0; white-space: nowrap;';
                    statusCell.innerHTML = `<span style="background: ${color}; color: ${textColor}; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 500;">${status.replace('_', ' ').toUpperCase()}</span>`;
                    
                    // Insert after the 3rd cell (positions 4, 5, 6) - SAME as headers
                    if (cells.length >= 3) {
                        const thirdCell = cells[2];
                        // Insert in correct order: 4, 5, 6
                        thirdCell.insertAdjacentElement('afterend', annotatedCell);
                        annotatedCell.insertAdjacentElement('afterend', reviewedCell);
                        reviewedCell.insertAdjacentElement('afterend', statusCell);
                    } else {
                        // Fallback: append at end
                        row.appendChild(annotatedCell);
                        row.appendChild(reviewedCell);
                        row.appendChild(statusCell);
                    }
                });
                
                console.log('[Monlam Dataset] ‚úÖ Enhanced', dataRows.length, 'rows');
            }, 2000); // Wait for Vue to render table
            
        } catch (error) {
            console.error('[Monlam Dataset] Error enhancing table:', error);
        }
    }
    
    // ========================================
    // FEATURE: Custom Project Home Page (Graceful)
    // ========================================
    let projectHomeCustomized = false;
    
    function customizeProjectHomePage() {
        try {
            const path = window.location.pathname;
            
            // Check if on project home page (pattern: /projects/{id}/ or /projects/{id})
            const projectHomeMatch = path.match(/^\/projects\/(\d+)\/?$/);
            if (!projectHomeMatch) {
                projectHomeCustomized = false; // Reset flag when leaving page
                return;
            }
            
            // Already customized this page
            if (projectHomeCustomized && document.getElementById('monlam-home-content')) {
                return;
            }
            
            const projectId = projectHomeMatch[1];
            
            // Wait for the stepper (YouTube video container) to appear
            const checkAndReplace = () => {
                // Don't run if already customized
                if (document.getElementById('monlam-home-content')) {
                    return true;
                }
                
                const stepper = document.querySelector('.v-stepper');
                
                if (stepper) {
                    console.log('[Monlam Home] Customizing project home page');
                    
                    // Find the card containing the stepper (NOT the entire main content)
                    const cardToReplace = stepper.closest('.v-card');
                    
                    if (cardToReplace) {
                        // Mark as customized
                        projectHomeCustomized = true;
                        
                        // Replace only the card content (not the sidebar)
                        cardToReplace.innerHTML = `
                            <div id="monlam-home-content" style="padding: 24px; font-family: MonlamTBslim, 'Noto Sans Tibetan', Roboto, sans-serif;">
                        <div style="padding: 24px; font-family: MonlamTBslim, 'Noto Sans Tibetan', Roboto, sans-serif;">
                            
                            <!-- Welcome Header -->
                            <div style="background: linear-gradient(135deg, #1976d2, #42a5f5); color: white; padding: 32px; border-radius: 12px; margin-bottom: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                                <h1 style="margin: 0; font-size: 2rem;">
                                    üëã ‡Ωñ‡ΩÄ‡æ≤‡ºã‡Ω§‡Ω≤‡Ω¶‡ºã‡Ωñ‡Ωë‡Ω∫‡ºã‡Ω£‡Ω∫‡ΩÇ‡Ω¶‡ºç Welcome!
                                </h1>
                            </div>
                            
                            <!-- Quick Actions -->
                            <div style="background: white; padding: 24px; border-radius: 12px; margin-bottom: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <h2 style="margin-top: 0; color: #333;">
                                    ‚ö° ‡Ωò‡æ±‡Ω¥‡Ω¢‡ºã‡Ω¶‡æ§‡æ±‡Ωº‡Ωë‡ºã‡Ωñ‡æ±‡Ω∫‡Ωë‡ºã‡Ω¶‡æí‡Ωº‡ºç / Quick Actions
                                </h2>
                                <div style="display: flex; gap: 16px; flex-wrap: wrap;">
                                    <button id="monlam-start-btn"
                                            style="background: #1976d2; color: white; border: none; padding: 16px 32px; border-radius: 8px; font-size: 1.1rem; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                        ‚ñ∂Ô∏è ‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡æ≤‡Ω∫‡Ω£‡ºã‡Ω†‡ΩÇ‡Ωº‡ºã‡Ω†‡Ωõ‡Ω¥‡ΩÇ‡Ω¶‡ºç / Start Annotation
                                    </button>
                                    <button id="monlam-dataset-btn"
                                            style="background: white; color: #1976d2; border: 2px solid #1976d2; padding: 16px 32px; border-radius: 8px; font-size: 1.1rem; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                        üìä ‡ΩÇ‡Ωû‡Ω≤‡ºã‡ΩÇ‡æ≤‡ΩÑ‡Ω¶‡ºç / Dataset
                                    </button>
                                    <button id="monlam-stats-btn"
                                            style="background: white; color: #666; border: 2px solid #666; padding: 16px 32px; border-radius: 8px; font-size: 1.1rem; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                        üìà ‡ΩÇ‡æ≤‡Ω¥‡Ωñ‡ºã‡Ωê‡Ωº‡ºç / Statistics
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Instructions Grid -->
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 24px;">
                                
                                <!-- Annotator Instructions -->
                                <div style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid #2196f3;">
                                    <h2 style="margin-top: 0; color: #1565c0;">
                                        ‚úèÔ∏è ‡Ω£‡Ω¶‡ºã‡Ωò‡Ω≤‡Ω†‡Ω≤‡ºã‡Ω£‡Ωò‡ºã‡Ω¶‡æü‡Ωº‡Ωì‡ºç / Annotator Instructions
                                    </h2>
                                    <h3 style="color: #1976d2; margin-bottom: 16px;">
                                        ‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡æ≤‡Ω∫‡Ω£‡ºã‡Ωá‡Ω≤‡ºã‡Ω£‡æü‡Ω¢‡ºã‡Ω¢‡æí‡æ±‡ΩÇ‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºã‡Ωò‡Ω≤‡Ωì‡ºç / How to Annotate
                                    </h3>
                                    
                                    <div style="border-left: 2px solid #2196f3; padding-left: 16px; margin-bottom: 16px;">
                                        <p style="margin: 8px 0;">
                                            <strong style="color: #1976d2;">‡ΩÇ‡Ωº‡Ωò‡ºã‡Ωî‡ºã‡Ωë‡ΩÑ‡ºã‡Ωî‡Ωº‡ºç / Step 1:</strong><br>
                                            '‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡æ≤‡Ω∫‡Ω£‡ºã‡Ω†‡ΩÇ‡Ωº‡ºã‡Ω†‡Ωõ‡Ω¥‡ΩÇ‡Ω¶‡ºã'‡Ωû‡Ω∫‡Ω¶‡ºã‡Ωî‡Ω¢‡ºã‡ΩÇ‡Ωì‡Ωº‡Ωì‡ºã‡Ωì‡Ω¶‡ºã‡Ω†‡ΩÇ‡Ωº‡ºã‡Ω†‡Ωõ‡Ω¥‡ΩÇ‡Ω¶‡ºã‡Ωñ‡æ±‡Ω∫‡Ωë‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºç<br>
                                            <span style="color: #666;">Click 'Start Annotation' to begin</span>
                                        </p>
                                    </div>
                                    
                                    <div style="border-left: 2px solid #2196f3; padding-left: 16px; margin-bottom: 16px;">
                                        <p style="margin: 8px 0;">
                                            <strong style="color: #1976d2;">‡ΩÇ‡Ωº‡Ωò‡ºã‡Ωî‡ºã‡ΩÇ‡Ωâ‡Ω≤‡Ω¶‡ºã‡Ωî‡ºç / Step 2:</strong><br>
                                            ‡Ω¶‡æí‡æ≤‡ºã‡Ω£‡ºã‡Ωâ‡Ωì‡ºã‡Ωì‡Ω¶‡ºã‡Ω°‡Ω≤‡ΩÇ‡ºã‡Ωê‡Ωº‡ΩÇ‡ºã‡ΩÇ‡Ω≤‡ºã‡Ω†‡Ωñ‡æ≤‡Ω≤‡ºã‡Ω¢‡æ©‡Ωº‡Ωò‡ºã‡Ω£‡ºã‡Ωû‡Ω≤‡Ωñ‡ºã‡Ωñ‡Ω§‡Ω∫‡Ω¢‡ºã‡Ωñ‡æ±‡Ω∫‡Ωë‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºç<br>
                                            <span style="color: #666;">Listen to the audio and check the transcription</span>
                                        </p>
                                    </div>
                                    
                                    <div style="border-left: 2px solid #2196f3; padding-left: 16px; margin-bottom: 16px;">
                                        <p style="margin: 8px 0;">
                                            <strong style="color: #1976d2;">‡ΩÇ‡Ωº‡Ωò‡ºã‡Ωî‡ºã‡ΩÇ‡Ω¶‡Ω¥‡Ωò‡ºã‡Ωî‡ºç / Step 3:</strong><br>
                                            ‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºã‡ΩÑ‡Ω∫‡Ω¶‡ºã‡Ω°‡Ω≤‡Ωì‡ºã‡Ωì‡ºã‡Ω°‡Ω≤‡ΩÇ‡ºã‡Ω¢‡æ©‡Ωº‡Ωò‡ºã‡Ω£‡ºã‡Ωñ‡Ωü‡Ωº‡ºã‡Ωñ‡ΩÖ‡Ωº‡Ω¶‡ºã‡Ω¢‡æí‡æ±‡ΩÇ‡ºã‡Ωî‡ºç<br>
                                            <span style="color: #666;">Edit the text if needed</span>
                                        </p>
                                    </div>
                                    
                                    <div style="border-left: 2px solid #4caf50; padding-left: 16px;">
                                        <p style="margin: 8px 0;">
                                            <strong style="color: #388e3c;">‡ΩÇ‡Ωº‡Ωò‡ºã‡Ωî‡ºã‡Ωñ‡Ωû‡Ω≤‡ºã‡Ωî‡ºç / Step 4:</strong><br>
                                            ‡Ω¢‡ºã‡Ω¶‡æ§‡æ≤‡Ωº‡Ωë‡ºã‡Ωñ‡æ±‡Ω∫‡Ωë‡ºã‡Ωî‡Ω†‡Ω≤‡ºã‡ΩÜ‡Ω∫‡Ωë‡ºã‡Ωë‡Ω¥‡ºã‡Ω¢‡æü‡ΩÇ‡Ω¶‡ºã (‚úì) ‡Ω£‡ºã‡ΩÇ‡Ωì‡Ωº‡Ωì‡ºã‡Ωì‡Ω¶‡ºã‡Ωò‡Ωë‡Ω¥‡Ωì‡ºã‡Ωë‡Ω¥‡ºã‡Ω†‡ΩÇ‡æ≤‡Ωº‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºç<br>
                                            <span style="color: #666;">Click the checkmark (‚úì) to confirm and move to next</span>
                                        </p>
                                    </div>
                                </div>
                                
                                <!-- Reviewer Instructions -->
                                <div style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid #ff9800;">
                                    <h2 style="margin-top: 0; color: #e65100;">
                                        ‚úÖ ‡Ωö‡Ωì‡ºã‡Ωî‡Ω†‡Ω≤‡ºã‡Ω†‡ΩÇ‡Ωì‡ºã‡Ω†‡Ωõ‡Ω≤‡Ωì‡ºã‡ΩÇ‡æ±‡Ω≤‡ºã‡Ω£‡Ωò‡ºã‡Ω¶‡æü‡Ωº‡Ωì‡ºç / Reviewer Instructions
                                    </h2>
                                    <h3 style="color: #f57c00; margin-bottom: 16px;">
                                        ‡Ωû‡Ω≤‡Ωñ‡ºã‡Ωñ‡Ω§‡Ω∫‡Ω¢‡ºã‡Ωá‡Ω≤‡ºã‡Ω£‡æü‡Ω¢‡ºã‡Ωñ‡æ±‡Ω∫‡Ωë‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºã‡Ωò‡Ω≤‡Ωì‡ºç / How to Review
                                    </h3>
                                    
                                    <div style="border-left: 2px solid #ff9800; padding-left: 16px; margin-bottom: 16px;">
                                        <p style="margin: 8px 0;">
                                            <strong style="color: #f57c00;">‡ΩÇ‡Ωº‡Ωò‡ºã‡Ωî‡ºã‡Ωë‡ΩÑ‡ºã‡Ωî‡Ωº‡ºç / Step 1:</strong><br>
                                            ‡ΩÇ‡Ωû‡Ω≤‡ºã‡ΩÇ‡æ≤‡ΩÑ‡Ω¶‡ºã‡Ωö‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ω£‡ºã‡Ω†‡ΩÇ‡æ≤‡Ωº‡ºã‡Ωì‡Ω¶‡ºã '‡ΩÇ‡æ≤‡Ω¥‡Ωñ‡ºã‡Ωü‡Ω≤‡Ωì‡ºã‡Ωî‡ºã'‡Ωû‡Ω∫‡Ω¶‡ºã‡Ωî‡Ω¢‡ºã‡Ω£‡ºã‡ΩÇ‡Ωü‡Ω≤‡ΩÇ‡Ω¶‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºç<br>
                                            <span style="color: #666;">Go to Dataset and filter by 'Done'</span>
                                        </p>
                                    </div>
                                    
                                    <div style="border-left: 2px solid #ff9800; padding-left: 16px; margin-bottom: 16px;">
                                        <p style="margin: 8px 0;">
                                            <strong style="color: #f57c00;">‡ΩÇ‡Ωº‡Ωò‡ºã‡Ωî‡ºã‡ΩÇ‡Ωâ‡Ω≤‡Ω¶‡ºã‡Ωî‡ºç / Step 2:</strong><br>
                                            ‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡æ≤‡Ω∫‡Ω£‡ºã‡Ω¢‡Ω∫‡ºã‡Ω¢‡Ω∫‡ºã‡Ωñ‡Ωû‡Ω≤‡Ωì‡ºã‡Ωë‡ΩÇ‡ºã‡Ωö‡Ωë‡ºã‡Ω£‡ºã‡Ωû‡Ω≤‡Ωñ‡ºã‡Ωñ‡Ω§‡Ω∫‡Ω¢‡ºã‡Ωñ‡æ±‡Ω∫‡Ωë‡ºã‡Ωî‡ºç<br>
                                            <span style="color: #666;">Check each annotation for accuracy</span>
                                        </p>
                                    </div>
                                    
                                    <div style="border-left: 2px solid #4caf50; padding-left: 16px;">
                                        <p style="margin: 8px 0;">
                                            <strong style="color: #388e3c;">‡ΩÇ‡Ωº‡Ωò‡ºã‡Ωî‡ºã‡ΩÇ‡Ω¶‡Ω¥‡Ωò‡ºã‡Ωî‡ºç / Step 3:</strong><br>
                                            '‡Ω†‡ΩÇ‡æ≤‡Ω≤‡ΩÇ' ‡Ω°‡ΩÑ‡ºã‡Ωì‡ºã '‡Ωò‡ºã‡Ω†‡ΩÇ‡æ≤‡Ω≤‡ΩÇ' ‡Ωû‡Ω∫‡Ω¶‡ºã‡Ωî‡Ω¢‡ºã‡Ω†‡Ωº‡Ω¶‡ºã‡Ω†‡Ωö‡Ωò‡ºã‡Ω£‡æü‡Ω¢‡ºã‡ΩÇ‡Ωì‡Ωº‡Ωì‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºç<br>
                                            <span style="color: #666;">Click 'Approve' or 'Reject' as appropriate</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Footer Note -->
                            <div style="background: #f5f5f5; padding: 16px; border-radius: 8px; margin-top: 24px; text-align: center;">
                                <p style="margin: 0; color: #666;">
                                    ‚ùì ‡Ω¢‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ω¢‡Ωò‡ºã‡Ωë‡ΩÇ‡Ωº‡Ω¶‡ºã‡Ω¶‡Ωò‡ºç ‡ΩÅ‡æ±‡Ω∫‡Ωë‡ºã‡ΩÄ‡æ±‡Ω≤‡ºã‡Ωö‡Ωì‡ºã‡Ωî‡Ω†‡Ω≤‡ºã‡Ω†‡ΩÇ‡Ωì‡ºã‡Ω†‡Ωõ‡Ω≤‡Ωì‡ºã‡Ω°‡ΩÑ‡ºã‡Ωì‡ºã‡Ωë‡Ωò‡Ω≤‡ΩÇ‡Ω¶‡ºã‡Ω†‡Ωñ‡Ω∫‡Ωì‡ºã‡Ω†‡ΩÇ‡Ωì‡ºã‡Ω†‡Ωõ‡Ω≤‡Ωì‡ºã‡Ω£‡ºã‡Ω†‡Ωñ‡æ≤‡Ω∫‡Ω£‡ºã‡Ωñ‡ºã‡ΩÇ‡Ωì‡ΩÑ‡ºã‡Ω¢‡Ωº‡ΩÇ‡Ω¶‡ºç<br>
                                    <span style="color: #999;">Need help? Contact your project administrator.</span>
                                </p>
                            </div>
                        </div>
                    `;
                    
                    // Attach click handlers to our custom buttons
                    setTimeout(() => {
                        // Start Annotation button - click the sidebar button
                        const startBtn = document.getElementById('monlam-start-btn');
                        if (startBtn) {
                            startBtn.onclick = () => {
                                // Find and click the sidebar "Start Annotation" button
                                const sidebarStartBtn = document.querySelector('.v-navigation-drawer .v-btn.primary, .v-list .v-btn.primary');
                                if (sidebarStartBtn) {
                                    sidebarStartBtn.click();
                                } else {
                                    // Fallback: navigate directly
                                    window.location.href = '/projects/' + projectId + '/speech-to-text';
                                }
                            };
                        }
                        
                        // Dataset button - click the sidebar item
                        const datasetBtn = document.getElementById('monlam-dataset-btn');
                        if (datasetBtn) {
                            datasetBtn.onclick = () => {
                                // Find and click the sidebar "Dataset" item
                                const sidebarItems = document.querySelectorAll('.v-list-item');
                                for (const item of sidebarItems) {
                                    const title = item.querySelector('.v-list-item__title');
                                    if (title && (title.textContent.includes('‡ΩÇ‡Ωû‡Ω≤‡ºã‡ΩÇ‡æ≤‡ΩÑ‡Ω¶') || title.textContent.includes('Dataset'))) {
                                        item.click();
                                        return;
                                    }
                                }
                                // Fallback
                                window.location.href = '/projects/' + projectId + '/dataset';
                            };
                        }
                        
                        // Statistics button
                        const statsBtn = document.getElementById('monlam-stats-btn');
                        if (statsBtn) {
                            statsBtn.onclick = () => {
                                window.location.href = '/monlam/' + projectId + '/completion/';
                            };
                        }
                    }, 100);
                    
                    return true;
                }
            }
            return false;
        };
        
            // Try immediately and then with limited retries
            if (!checkAndReplace()) {
                let attempts = 0;
                const interval = setInterval(() => {
                    if (checkAndReplace() || attempts++ > 10) {
                        clearInterval(interval);
                    }
                }, 300);
            }
        } catch (e) {
            console.error('[Monlam Home] Error customizing home page:', e);
        }
    }
    
    function init() {
        console.log('[Monlam] Initializing features...');
        console.log('[Monlam] Current path:', window.location.pathname);
        
        // Customize project home page (replace YouTube videos with instructions)
        customizeProjectHomePage();
        
        // Set up metrics click intercept FIRST
        interceptMetricsClick();
        
        // Check if we need to redirect metrics page (if already on metrics)
        redirectMetricsPage();
        
        setTimeout(() => {
            enableAudioLoop();
            enhanceDatasetTable(); // Add assignment columns to dataset table
        }, 1000);
        
        // Re-enhance table on SPA navigation
        let lastPath = window.location.pathname;
        setInterval(() => {
            if (window.location.pathname !== lastPath) {
                lastPath = window.location.pathname;
                console.log('[Monlam] Navigation detected:', lastPath);
                setTimeout(() => {
                    enableAudioLoop();
                    enhanceDatasetTable(); // Re-enhance dataset table on navigation
                }, 500);
            }
        }, 500);
    }
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
    
    console.log('[Monlam Inline] Features script loaded');
})();
  </script>
</body>

</html>