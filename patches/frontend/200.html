<!doctype html>
<html>

<head>
  <meta data-n-head="1" charset="utf-8">
  <meta data-n-head="1" name="viewport" content="width=device-width,initial-scale=1">
  <meta data-n-head="1" data-hid="description" name="description"
    content="Monlam Tools - ‡Ωò‡Ωº‡Ωì‡ºã‡Ω£‡Ωò‡ºã annotation tools for Tibetan language AI">
  <title>Monlam Tools</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon.png">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon.png">
  <link rel="preload" href="/static/_nuxt/08fba5f.js" as="script">
  <link rel="preload" href="/static/_nuxt/132fcbd.js" as="script">
  <link rel="preload" href="/static/_nuxt/50aa8ea.js" as="script">
  <link rel="preload" href="/static/_nuxt/bd0aa1f.js" as="script">
  <style>
    /* Monlam Tools Custom Branding */
    :root {
      --monlam-gold: #B8963E;
      --monlam-gold-dark: #9A7B32;
      --monlam-navy: #1a1a2e;
      --monlam-font: 'MonlamTBslim', 'Noto Sans Tibetan', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    .navbar.is-primary {
      background-color: var(--monlam-navy) !important;
    }

    .button.is-primary {
      background-color: var(--monlam-gold) !important;
      border-color: var(--monlam-gold) !important;
    }

    .button.is-primary:hover {
      background-color: var(--monlam-gold-dark) !important;
    }

    a.has-text-primary {
      color: var(--monlam-gold) !important;
    }

    .tag.is-primary {
      background-color: var(--monlam-gold) !important;
    }

    .menu-list a.is-active {
      background-color: var(--monlam-gold) !important;
    }

    .progress.is-primary::-webkit-progress-value {
      background-color: var(--monlam-gold) !important;
    }

    .tabs.is-toggle li.is-active a {
      background-color: var(--monlam-gold) !important;
      border-color: var(--monlam-gold) !important;
    }

    .pagination-link.is-current {
      background-color: var(--monlam-gold) !important;
      border-color: var(--monlam-gold) !important;
    }

    /* Hide GitHub button and link */
    a[href*="github.com"],
    a[href*="GITHUB"],
    button[class*="github"],
    .github-button {
      display: none !important;
    }

    /* ========================================
         MonlamTBslim FONT - Roboto deleted from build
         ======================================== */

    /* Primary MonlamTBslim font-face */
    @font-face {
      font-family: 'MonlamTBslim';
      src: local('MonlamTBslim'),
        url('/static/fonts/MonlamTBslim.woff2') format('woff2'),
        url('/static/fonts/MonlamTBslim.woff') format('woff'),
        url('/static/fonts/MonlamTBslim.ttf') format('truetype');
      font-weight: 100 900;
      font-style: normal;
      font-display: swap;
    }

    /* Roboto fallback - when Roboto is requested, use MonlamTBslim */
    @font-face {
      font-family: 'Roboto';
      src: local('MonlamTBslim'),
        url('/static/fonts/MonlamTBslim.woff2') format('woff2'),
        url('/static/fonts/MonlamTBslim.woff') format('woff'),
        url('/static/fonts/MonlamTBslim.ttf') format('truetype');
      font-weight: 100 900;
      font-style: normal;
      font-display: swap;
    }

    /* Apply MonlamTBslim everywhere */
    *,
    *::before,
    *::after {
      font-family: var(--monlam-font) !important;
    }

    /* Fix Tibetan vowel marks (‡Ω≤ ‡Ω¥) being cut off - need extra line-height */
    html,
    html body,
    html body *,
    .v-application,
    .v-application *,
    .v-btn,
    .v-list-item,
    .v-menu__content,
    .v-select__selection,
    .v-toolbar__title,
    .v-tab,
    label,
    span,
    p,
    div,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      line-height: 1.8 !important;
    }

    /* Extra padding for menu items and buttons */
    .v-btn {
      padding-top: 4px !important;
      padding-bottom: 4px !important;
      min-height: 40px !important;
    }

    .v-list-item {
      min-height: 48px !important;
      padding-top: 8px !important;
      padding-bottom: 8px !important;
    }

    .v-tab {
      padding-top: 8px !important;
      padding-bottom: 8px !important;
    }

    .v-chip {
      height: auto !important;
      min-height: 32px !important;
      padding-top: 4px !important;
      padding-bottom: 4px !important;
    }

    .v-text-field input,
    .v-text-field textarea {
      padding-top: 8px !important;
      padding-bottom: 8px !important;
      line-height: 1.8 !important;
    }

  </style>
</head>

<body>
  <div id="__nuxt">
    <style>
      #nuxt-loading {
        background: #fff;
        visibility: hidden;
        opacity: 0;
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        animation: nuxtLoadingIn 10s ease;
        -webkit-animation: nuxtLoadingIn 10s ease;
        animation-fill-mode: forwards;
        overflow: hidden
      }

      @keyframes nuxtLoadingIn {
        0% {
          visibility: hidden;
          opacity: 0
        }

        20% {
          visibility: visible;
          opacity: 0
        }

        100% {
          visibility: visible;
          opacity: 1
        }
      }

      @-webkit-keyframes nuxtLoadingIn {
        0% {
          visibility: hidden;
          opacity: 0
        }

        20% {
          visibility: visible;
          opacity: 0
        }

        100% {
          visibility: visible;
          opacity: 1
        }
      }

      #nuxt-loading>div,
      #nuxt-loading>div:after {
        border-radius: 50%;
        width: 5rem;
        height: 5rem
      }

      #nuxt-loading>div {
        font-size: 10px;
        position: relative;
        text-indent: -9999em;
        border: .5rem solid #f5f5f5;
        border-left: .5rem solid #B8963E;
        -webkit-transform: translateZ(0);
        -ms-transform: translateZ(0);
        transform: translateZ(0);
        -webkit-animation: nuxtLoading 1.1s infinite linear;
        animation: nuxtLoading 1.1s infinite linear
      }

      #nuxt-loading.error>div {
        border-left: .5rem solid #ff4500;
        animation-duration: 5s
      }

      @-webkit-keyframes nuxtLoading {
        0% {
          -webkit-transform: rotate(0);
          transform: rotate(0)
        }

        100% {
          -webkit-transform: rotate(360deg);
          transform: rotate(360deg)
        }
      }

      @keyframes nuxtLoading {
        0% {
          -webkit-transform: rotate(0);
          transform: rotate(0)
        }

        100% {
          -webkit-transform: rotate(360deg);
          transform: rotate(360deg)
        }
      }
    </style>
    <script>window.addEventListener("error", function () { var e = document.getElementById("nuxt-loading"); e && (e.className += " error") })</script>
    <div id="nuxt-loading" aria-live="polite" role="status">
      <div>Loading...</div>
    </div>
  </div>
  <script>window.__NUXT__ = { config: { _app: { basePath: "/", assetsPath: "/static/_nuxt/", cdnURL: null } } }</script>
  <script>
    // Tibetan translations for Monlam Tools (Doccano)
    const translations = {
      // Home page
      'Text Annotation for Humans': '‡Ωû‡Ω¥‡ºã‡Ωë‡ΩÇ‡ºã‡Ωñ‡æ±‡ºã‡Ω°‡Ω¥‡Ω£‡ºç',
      'Get Started': '‡Ω†‡ΩÇ‡Ωº‡ºã‡Ωñ‡Ω¢‡æ©‡Ωò‡Ω¶‡ºç',
      'GET STARTED': '‡Ω†‡ΩÇ‡Ωº‡ºã‡Ωñ‡Ω¢‡æ©‡Ωò‡Ω¶‡ºç',
      'The best features': '‡Ωë‡Ωò‡Ω≤‡ΩÇ‡Ω¶‡ºã‡Ωñ‡Ω¶‡Ω£‡ºã‡ΩÅ‡æ±‡Ωë‡ºã‡ΩÜ‡Ωº‡Ω¶‡ºç',
      'Team Collaboration': '‡Ωö‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ωî‡Ω†‡Ω≤‡ºã‡Ωò‡Ωâ‡Ωò‡ºã‡Ω£‡Ω¶‡ºç',
      'Annotation with your team mates': '‡ΩÅ‡æ±‡Ωº‡Ωë‡ºã‡ΩÄ‡æ±‡Ω≤‡ºã‡Ω£‡Ω¶‡ºã‡Ω¢‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ωë‡ΩÑ‡ºã‡Ωò‡Ωâ‡Ωò‡ºã‡Ωë‡Ω¥‡ºã‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡Ωº‡Ωë‡ºç',
      'Any Language': '‡Ω¶‡æê‡Ωë‡ºã‡Ω¢‡Ω≤‡ΩÇ‡Ω¶‡ºã‡ΩÇ‡ΩÑ‡ºã‡Ω°‡ΩÑ‡ºã‡ºç',
      'Annotation with any language': '‡Ω¶‡æê‡Ωë‡ºã‡Ω¢‡Ω≤‡ΩÇ‡Ω¶‡ºã‡ΩÇ‡ΩÑ‡ºã‡Ω°‡ΩÑ‡ºã‡Ω¢‡Ω¥‡ΩÑ‡ºã‡Ωñ‡Ω†‡Ω≤‡ºã‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡Ωº‡Ωë‡ºç',
      'Open Source': '‡Ω£‡Ω¶‡ºã‡Ω¶‡æ≥‡ºã‡Ωî‡Ωº‡ºç',
      'Annotation that is free and customizable': '‡Ω¢‡Ω≤‡Ωì‡ºã‡Ωò‡Ω∫‡Ωë‡ºã‡Ωë‡ΩÑ‡ºã‡Ω¢‡ΩÑ‡ºã‡Ωò‡Ωº‡Ω¶‡ºã‡Ωñ‡Ωü‡Ωº‡ºã‡Ωñ‡ΩÖ‡Ωº‡Ω¶‡ºã‡Ωñ‡æ±‡Ω∫‡Ωë‡ºã‡Ω¢‡Ω¥‡ΩÑ‡ºã‡Ωñ‡Ω†‡Ω≤‡ºã‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡Ωº‡Ωë‡ºç',
      'Realize your ideas quickly': '‡ΩÅ‡æ±‡Ωº‡Ωë‡ºã‡ΩÄ‡æ±‡Ω≤‡ºã‡Ωñ‡Ω¶‡Ωò‡ºã‡Ωñ‡æ≥‡Ωº‡ºã‡Ωò‡ΩÇ‡æ±‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ωî‡Ωº‡Ω¢‡ºã‡Ωë‡ΩÑ‡Ωº‡Ω¶‡ºã‡Ω¶‡Ω¥‡ºã‡Ω¶‡æí‡æ≤‡Ω¥‡Ωñ‡ºç',
      'Try Demo': '‡Ωö‡Ωº‡Ωë‡ºã‡Ω£‡æü‡ºã‡Ωñ‡æ±‡Ω∫‡Ωë‡ºç',
      'TRY DEMO': '‡Ωö‡Ωº‡Ωë‡ºã‡Ω£‡æü‡ºã‡Ωñ‡æ±‡Ω∫‡Ωë‡ºç',

      // Navigation
      'Login': '‡Ωì‡ΩÑ‡ºã‡Ω†‡Ωõ‡Ω¥‡Ω£‡ºç',
      'LOGIN': '‡Ωì‡ΩÑ‡ºã‡Ω†‡Ωõ‡Ω¥‡Ω£‡ºç',
      'Sign Out': '‡Ωï‡æ±‡Ω≤‡Ω¢‡ºã‡Ω†‡Ωê‡Ωº‡Ωì‡ºç',
      'Projects': '‡Ω£‡Ω¶‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºç',
      'PROJECTS': '‡Ω£‡Ω¶‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºç',

      // Project home
      'Home': '‡Ωò‡Ωë‡Ω¥‡Ωì‡ºã‡ΩÑ‡Ωº‡Ω¶‡ºç',
      'Welcome to Doccano!': '‡Ω¶‡æê‡Ω¥‡ºã‡ΩÅ‡Ωò‡Ω¶‡ºã‡Ωñ‡Ωü‡ΩÑ‡ºã‡ºç',
      'Welcome to Monlam Tools!': '‡Ω¶‡æê‡Ω¥‡ºã‡ΩÅ‡Ωò‡Ω¶‡ºã‡Ωñ‡Ωü‡ΩÑ‡ºã‡ºç',
      'Import a dataset': '‡ΩÇ‡Ωû‡Ω≤‡ºã‡ΩÇ‡æ≤‡ΩÑ‡Ω¶‡ºã‡Ωì‡ΩÑ‡ºã‡Ω†‡Ωë‡æ≤‡Ω∫‡Ωì‡ºç',
      'Create labels for this project': '‡Ω£‡Ω¶‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºã‡Ω†‡Ωë‡Ω≤‡Ω†‡Ω≤‡ºã‡ΩÜ‡Ω∫‡Ωë‡ºã‡ΩÅ‡ºã‡Ωñ‡æ±‡ΩÑ‡ºã‡ΩÇ‡Ω¶‡Ω¢‡ºã‡Ωñ‡Ωü‡Ωº‡ºç',
      'Add members for collaborative work': '‡Ωò‡Ωâ‡Ωò‡ºã‡Ω£‡Ω¶‡ºã‡ΩÄ‡æ±‡Ω≤‡ºã‡ΩÜ‡Ω∫‡Ωë‡ºã‡Ωö‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ωò‡Ω≤‡ºã‡Ω¶‡æ£‡Ωº‡Ωì‡ºã‡Ωî‡ºç',
      'Define a guideline for the work': '‡Ω£‡Ω¶‡ºã‡ΩÄ‡Ω†‡Ω≤‡ºã‡Ω£‡Ωò‡ºã‡Ω¶‡æü‡Ωº‡Ωì‡ºã‡ΩÇ‡Ωè‡Ωì‡ºã‡Ω†‡ΩÅ‡Ω∫‡Ω£‡ºç',
      'Annotate the dataset': '‡ΩÇ‡Ωû‡Ω≤‡ºã‡ΩÇ‡æ≤‡ΩÑ‡Ω¶‡ºã‡Ω£‡ºã‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡Ωº‡Ωë‡ºç',
      'View statistics': '‡Ωö‡Ωë‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºã‡Ω£‡æü‡ºã‡Ωñ‡ºç',
      'Export the dataset': '‡ΩÇ‡Ωû‡Ω≤‡ºã‡ΩÇ‡æ≤‡ΩÑ‡Ω¶‡ºã‡Ωï‡æ±‡Ω≤‡Ω¢‡ºã‡Ω†‡Ωë‡æ≤‡Ω∫‡Ωì‡ºç',

      // Common
      'Save': '‡Ωâ‡Ω¢‡ºã‡Ωö‡ΩÇ‡Ω¶‡ºç',
      'Edit': '‡Ω¢‡æ©‡Ωº‡Ωò‡ºã‡Ω¶‡æí‡æ≤‡Ω≤‡ΩÇ',
      'Create': '‡ΩÇ‡Ω¶‡Ω¢‡ºã‡Ωñ‡Ωü‡Ωº‡ºç',
      'Cancel': '‡Ω†‡Ωë‡Ωº‡Ω¢‡ºã‡Ωñ‡ºç',
      'Close': '‡Ω¶‡æí‡Ωº‡ºã‡Ω¢‡æí‡æ±‡ΩÇ',
      'Delete': '‡Ωñ‡Ω¶‡Ω¥‡Ωñ‡ºã‡Ωî‡ºç',
      'Search': '‡Ωñ‡Ωô‡Ω£‡ºã‡Ωû‡Ω≤‡Ωñ‡ºç',
      'Import': '‡Ωì‡ΩÑ‡ºã‡Ω†‡Ωë‡æ≤‡Ω∫‡Ωì‡ºç',
      'Export': '‡Ωï‡æ±‡Ω≤‡Ω¢‡ºã‡Ω†‡Ωë‡æ≤‡Ω∫‡Ωì‡ºç',
      'Add': '‡Ω¶‡æ£‡Ωº‡Ωì‡ºã‡Ωî‡ºç',
      'Upload': '‡Ω¶‡æê‡æ±‡Ω∫‡Ω£‡ºã‡Ω†‡Ωá‡Ω¥‡ΩÇ',
      'Yes': '‡Ω°‡Ω≤‡Ωì‡ºç',
      'No': '‡Ωò‡Ω≤‡Ωì‡ºç',
      'Loading...': '‡Ω¶‡æ£‡Ωì‡ºã‡Ωñ‡Ωû‡Ω≤‡Ωì‡ºã‡Ωî‡ºç...',
      'Loading... Please wait': '‡Ω¶‡æ£‡Ωì‡ºã‡Ωñ‡Ωû‡Ω≤‡Ωì‡ºã‡Ωî‡ºç ‡Ω¶‡æí‡Ω¥‡ΩÇ‡ºã‡Ω¢‡Ωº‡ΩÇ‡Ω¶‡ºç',

      // Labels/Annotation
      'Labels': '‡ΩÅ‡ºã‡Ωñ‡æ±‡ΩÑ‡ºã‡ºç',
      'Dataset': '‡ΩÇ‡Ωû‡Ω≤‡ºã‡ΩÇ‡æ≤‡ΩÑ‡Ω¶‡ºç',
      'Members': '‡Ωö‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ωò‡Ω≤‡ºç',
      'Guideline': '‡Ω£‡Ωò‡ºã‡Ω¶‡æü‡Ωº‡Ωì‡ºç',
      'Statistics': '‡Ωö‡Ωë‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºç',
      'Metrics': '‡Ωö‡Ωë‡ºã‡ΩÇ‡Ωû‡Ω≤‡ºç',
      'Settings': '‡Ω¶‡æí‡æ≤‡Ω≤‡ΩÇ‡ºã‡Ω†‡ΩÇ‡Ωº‡Ωë‡ºç',
      'Comments': '‡Ωò‡ΩÜ‡Ωì‡ºç',

      // Demo types
      'Named Entity Recognition': '‡Ωò‡Ω≤‡ΩÑ‡ºã‡Ωö‡Ω≤‡ΩÇ‡ºã‡Ωë‡Ωñ‡æ±‡Ω∫‡ºã‡Ω†‡Ωñ‡æ±‡Ω∫‡Ωë‡ºç',
      'Sentiment Analysis': '‡Ω¶‡Ω∫‡Ωò‡Ω¶‡ºã‡Ωö‡Ωº‡Ω¢‡ºã‡Ωë‡Ωñ‡æ±‡Ω∫‡ºã‡Ωû‡Ω≤‡Ωñ‡ºç',
      'Translation': '‡Ω°‡Ω≤‡ΩÇ‡ºã‡Ω¶‡æí‡æ±‡Ω¥‡Ω¢‡ºç',
      'Text to SQL': '‡Ω°‡Ω≤‡ºã‡ΩÇ‡Ω∫‡ºã‡Ωì‡Ω¶‡ºãSQL',
      'Intent Detection and Slot Filling': '‡Ωë‡Ωò‡Ω≤‡ΩÇ‡Ω¶‡ºã‡Ωñ‡Ω¶‡Ω£‡ºã‡Ω†‡Ωö‡Ωº‡Ω£‡ºã‡Ωû‡Ω≤‡Ωñ‡ºç',
      'Image Classification': '‡Ωî‡Ω¢‡ºã‡Ω¢‡Ω≤‡Ω¶‡ºã‡Ωë‡Ωñ‡æ±‡Ω∫‡ºã‡Ω†‡Ωñ‡æ±‡Ω∫‡Ωë‡ºç',
      'Image Captioning': '‡Ωî‡Ω¢‡ºã‡Ω¢‡Ω≤‡Ω¶‡ºã‡Ω†‡ΩÇ‡æ≤‡Ω∫‡Ω£‡ºã‡Ωñ‡Ω§‡Ωë‡ºç',
      'Object Detection': '‡Ωë‡ΩÑ‡Ωº‡Ω¶‡ºã‡Ωî‡Ωº‡ºã‡Ω†‡Ωö‡Ωº‡Ω£‡ºã‡Ωû‡Ω≤‡Ωñ‡ºç',
      'Polygon Segmentation': '‡Ωò‡Ωê‡Ω†‡ºã‡Ω¢‡Ω≤‡Ω¶‡ºã‡Ωë‡Ωñ‡æ±‡Ω∫‡ºã‡Ωñ‡Ωû‡ΩÇ',
      'Speech to Text': '‡Ω¶‡æê‡Ωë‡ºã‡ΩÜ‡ºã‡Ωì‡Ω¶‡ºã‡Ω°‡Ω≤‡ºã‡ΩÇ‡Ω∫‡ºç',

      // Project types
      'Text Classification': '‡Ω°‡Ω≤‡ºã‡ΩÇ‡Ω∫‡ºã‡Ωë‡Ωñ‡æ±‡Ω∫‡ºã‡Ω†‡Ωñ‡æ±‡Ω∫‡Ωë‡ºç',
      'Sequence Labeling': '‡Ωò‡Ωö‡Ωò‡Ω¶‡ºã‡Ω¢‡Ω≤‡Ω¶‡ºã‡ΩÅ‡ºã‡Ωñ‡æ±‡ΩÑ‡ºã‡ºç',
      'Sequence to sequence': '‡Ωò‡Ωö‡Ωò‡Ω¶‡ºã‡Ωì‡Ω¶‡ºã‡Ωò‡Ωö‡Ωò‡Ω¶‡ºç',

      // Doccano branding
      'doccano': 'Monlam Tools',
      'Doccano': 'Monlam Tools',
      'Monlam AI': 'Monlam Tools',

      // Copyright - fix year to 2026
      '¬© 2025 Monlam Tools': '¬© 2026 Monlam Tools',
      '¬© 2026 Monlam AI': '¬© 2026 Monlam Tools',

    };

    document.addEventListener('DOMContentLoaded', function () {
      // Update title
      document.title = 'Monlam Tools';

      // ========================================
      // Force Monlam favicon (override any Nuxt.js defaults)
      // ========================================
      function setFavicon() {
        // Remove existing favicons
        document.querySelectorAll('link[rel*="icon"]').forEach(function (link) {
          if (!link.href.includes('favicon.ico') && !link.href.includes('favicon.png')) {
            link.remove();
          }
        });

        // Ensure our favicon links exist
        const head = document.head;
        const existingIco = document.querySelector('link[href="/favicon.ico"]');
        if (!existingIco) {
          const ico = document.createElement('link');
          ico.rel = 'icon';
          ico.type = 'image/x-icon';
          ico.href = '/favicon.ico';
          head.appendChild(ico);
        }
      }
      setFavicon();

      function replaceText(element) {
        // Update title dynamically
        if (document.title.includes('doccano')) {
          document.title = 'Monlam Tools';
        }

        // Walk through all text nodes
        const walker = document.createTreeWalker(element, NodeFilter.SHOW_TEXT, null, false);
        let node;
        while (node = walker.nextNode()) {
          let text = node.nodeValue;
          let changed = false;

          // Check each translation
          for (const [eng, tib] of Object.entries(translations)) {
            if (text.includes(eng)) {
              text = text.replace(new RegExp(eng.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'), tib);
              changed = true;
            }
          }

          if (changed) {
            node.nodeValue = text;
          }
        }
      }

      // Observe DOM changes
      const observer = new MutationObserver(function (mutations) {
        mutations.forEach(function (mutation) {
          if (mutation.type === 'childList') {
            mutation.addedNodes.forEach(function (node) {
              if (node.nodeType === Node.ELEMENT_NODE) {
                replaceText(node);
              }
            });
          }
        });
      });

      observer.observe(document.body, { childList: true, subtree: true });

      // Initial replacement
      replaceText(document.body);

      // Periodic check
      setInterval(function () {
        replaceText(document.body);
        // Remove GitHub buttons/links
        document.querySelectorAll('a[href*="github"], button').forEach(function (el) {
          if (el.textContent.toLowerCase().includes('github')) {
            el.style.display = 'none';
          }
        });
      }, 1000);

      // ========================================
      // Review Button Styling: Red O / Green Check
      // ========================================
      const CLOSE_PATH = "M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z";
      const CHECK_PATH = "M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z";
      const CIRCLE_PATH = "M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z";

      function styleReviewButtons() {
        document.querySelectorAll('.v-btn--icon .v-icon svg path').forEach(function (path) {
          const d = path.getAttribute('d');
          // X icon -> Red Circle
          if (d === CLOSE_PATH) {
            path.setAttribute('d', CIRCLE_PATH);
            path.style.fill = '#f44336';
          }
          // Check icon -> Green
          else if (d === CHECK_PATH) {
            path.style.fill = '#4caf50';
          }
        });
      }

      // Run periodically to catch dynamic updates
      setInterval(styleReviewButtons, 500);
      styleReviewButtons();

      // ========================================
      // FORCE MonlamTBslim font - override Vuetify's runtime Roboto injection
      // ========================================
      const MONLAM_FONT = "'MonlamTBslim', 'Noto Sans Tibetan', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif";

      function forceMonlamFont() {
        // Override on html and body elements
        document.documentElement.style.setProperty('font-family', MONLAM_FONT, 'important');
        document.body.style.setProperty('font-family', MONLAM_FONT, 'important');

        // Override on v-application (Vuetify root)
        document.querySelectorAll('.v-application').forEach(function (el) {
          el.style.setProperty('font-family', MONLAM_FONT, 'important');
        });

        // Override all elements that Vuetify typically styles
        document.querySelectorAll('h1, h2, h3, h4, h5, h6, .display-1, .display-2, .headline, .title, .subtitle-1, .subtitle-2, .body-1, .body-2, .v-btn, .v-card, .v-list-item, .v-toolbar__title, .v-tab, span, p, div, label, input, textarea').forEach(function (el) {
          el.style.setProperty('font-family', MONLAM_FONT, 'important');
          el.style.setProperty('line-height', '1.8', 'important');
        });
      }

      // Run immediately and frequently to override Vuetify
      forceMonlamFont();
      setInterval(forceMonlamFont, 500);

      // Also run after page fully loads
      window.addEventListener('load', function () {
        forceMonlamFont();
        setTimeout(forceMonlamFont, 100);
        setTimeout(forceMonlamFont, 500);
        setTimeout(forceMonlamFont, 1000);
      });


    });
  </script>
  <script src="/static/_nuxt/08fba5f.js"></script>
  <script src="/static/_nuxt/132fcbd.js"></script>
  <script src="/static/_nuxt/50aa8ea.js"></script>
  <script src="/static/_nuxt/bd0aa1f.js"></script>
  
  <!-- Monlam Features - Inline for Maximum Reliability -->
  <script>
(function() {
    'use strict';
    
    console.log('[Monlam Inline] Features loading...');
    
    const CONFIG = {
        maxRetries: 50,
        retryDelay: 200,
        projectId: null
    };
    
    // UTILITIES
    function getProjectId() {
        const match = window.location.pathname.match(/\/projects\/(\d+)/);
        return match ? match[1] : null;
    }
    
    function waitForElement(selector, callback, retries = 0) {
        const element = document.querySelector(selector);
        if (element) {
            console.log(`[Monlam] Found element: ${selector}`);
            callback(element);
        } else if (retries < CONFIG.maxRetries) {
            setTimeout(() => waitForElement(selector, callback, retries + 1), CONFIG.retryDelay);
        } else {
            console.log(`[Monlam] Timeout waiting for: ${selector}`);
        }
    }
    
    function waitForElements(selector, callback, retries = 0) {
        const elements = document.querySelectorAll(selector);
        if (elements.length > 0) {
            console.log(`[Monlam] Found ${elements.length} elements: ${selector}`);
            callback(elements);
        } else if (retries < CONFIG.maxRetries) {
            setTimeout(() => waitForElements(selector, callback, retries + 1), CONFIG.retryDelay);
        }
    }
    
    // FEATURE 1: AUDIO AUTO-LOOP
    let audioObserver = null; // Store observer to disconnect it later
    
    function enableAudioLoop() {
        const path = window.location.pathname;
        const isAnnotationPage = path.includes('/speech-to-text') || path.match(/\/projects\/\d+\/\d+$/);
        
        // Disconnect previous observer if exists
        if (audioObserver) {
            audioObserver.disconnect();
            audioObserver = null;
        }
        
        // STOP and reset ALL audio elements when NOT on annotation page
        if (!isAnnotationPage) {
            console.log('[Monlam Audio] Not on annotation page - stopping all audio');
            document.querySelectorAll('audio[data-monlam-loop]').forEach(audio => {
                audio.pause();
                audio.currentTime = 0;
                audio.loop = false;
                audio.removeAttribute('data-monlam-loop');
            });
            return;
        }
        
        console.log('[Monlam Audio] Enabling audio loop...');
        
        function applyLoop(audio) {
            // Only apply to audio on annotation pages
            if (!audio.hasAttribute('data-monlam-loop')) {
                audio.loop = true;
                audio.setAttribute('data-monlam-loop', 'true');
                
                if (audio.readyState >= 2) {
                    audio.play().catch(e => {
                        console.log('[Monlam Audio] Auto-play blocked, waiting for interaction');
                        document.addEventListener('click', () => audio.play(), { once: true });
                    });
                } else {
                    audio.addEventListener('canplay', () => {
                        audio.play().catch(e => {
                            document.addEventListener('click', () => audio.play(), { once: true });
                        });
                    }, { once: true });
                }
                
                console.log('[Monlam Audio] Loop enabled');
            }
        }
        
        waitForElements('audio', (audioElements) => {
            audioElements.forEach(applyLoop);
        });
        
        // Only set up observer on annotation pages
        audioObserver = new MutationObserver(() => {
            document.querySelectorAll('audio:not([data-monlam-loop])').forEach(applyLoop);
        });
        audioObserver.observe(document.body, { childList: true, subtree: true });
    }
    
    // FEATURE 2: DATASET COLUMNS
    function addDatasetColumns() {
        const isDatasetPage = window.location.pathname.includes('/dataset');
        if (!isDatasetPage) return;
        
        console.log('[Monlam Dataset] Adding completion columns...');
        CONFIG.projectId = getProjectId();
        
        let assignmentData = {};
        
        fetch(`/v1/projects/${CONFIG.projectId}/assignments/`)
            .then(r => r.json())
            .then(data => {
                const assignments = data.results || data;
                assignments.forEach(a => {
                    assignmentData[a.example_id] = a;
                });
                console.log('[Monlam Dataset] Loaded', Object.keys(assignmentData).length, 'assignments');
                injectColumns();
            })
            .catch(e => console.error('[Monlam Dataset] Failed:', e));
        
        function injectColumns() {
            waitForElement('thead tr', (headerRow) => {
                if (headerRow.querySelector('.monlam-col')) return;
                
                const th = document.createElement('th');
                th.className = 'monlam-col text-start';
                th.innerHTML = '<span style="font-weight: 600;">üë§ Assigned To</span>';
                th.style.cssText = 'padding: 12px; background: #f5f5f5;';
                headerRow.appendChild(th);
                
                console.log('[Monlam Dataset] Header added');
            });
            
            // Function to process rows and add completion data
            function processRows() {
                document.querySelectorAll('tbody tr:not([data-monlam-col])').forEach(row => {
                    row.setAttribute('data-monlam-col', 'true');
                    
                    // Get example ID from Cell 1 (ID column)
                    const cells = row.querySelectorAll('td');
                    if (cells.length < 2) return;
                    
                    const exampleId = cells[1].textContent.trim();
                    if (!exampleId || !/^\d+$/.test(exampleId)) return;
                    
                    const assignment = assignmentData[exampleId];
                    
                    const td = document.createElement('td');
                    td.className = 'monlam-col text-start';
                    td.style.cssText = 'padding: 12px;';
                    
                    if (assignment) {
                        td.innerHTML = `
                            <div style="display: flex; flex-direction: column; gap: 4px;">
                                <span style="background: #2196F3; color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; display: inline-block; width: fit-content;">
                                    üìã ${assignment.status}
                                </span>
                                <span style="font-size: 10px; color: #666;">${assignment.assigned_to_username || 'N/A'}</span>
                            </div>
                        `;
                    } else {
                        td.innerHTML = '<span style="color: #999; font-size: 12px;">Not assigned</span>';
                    }
                    
                    row.appendChild(td);
                });
                
                const rowsProcessed = document.querySelectorAll('tbody tr[data-monlam-col]').length;
                if (rowsProcessed > 0) {
                    console.log('[Monlam Dataset] Processed', rowsProcessed, 'rows');
                }
            }
            
            // Set up observer for future rows
            const observer = new MutationObserver(() => {
                processRows();
            });
            
            waitForElement('tbody', (tbody) => {
                // Process existing rows first
                processRows();
                
                // Then watch for new rows
                observer.observe(tbody, { childList: true, subtree: true });
            });
        }
    }
    
    // FEATURE 3: METRICS MATRIX
    function addMetricsMatrix() {
        const isMetricsPage = window.location.pathname.endsWith('/metrics');
        if (!isMetricsPage) return;
        
        console.log('[Monlam Metrics] Adding completion matrix...');
        CONFIG.projectId = getProjectId();
        
        Promise.all([
            fetch(`/v1/projects/${CONFIG.projectId}/assignments/completion-matrix/summary/`).then(r => r.json()),
            fetch(`/v1/projects/${CONFIG.projectId}/assignments/completion-matrix/annotators/`).then(r => r.json()),
        ]).then(([summary, annotators]) => {
            console.log('[Monlam Metrics] Data fetched:', summary, annotators);
            injectMatrix(summary, annotators);
        }).catch(e => console.error('[Monlam Metrics] Failed:', e));
        
        function injectMatrix(summary, annotators) {
            waitForElement('main', (main) => {
                if (main.querySelector('.monlam-metrics')) return;
                
                const section = document.createElement('div');
                section.className = 'monlam-metrics';
                section.style.cssText = 'margin: 20px; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);';
                
                section.innerHTML = `
                    <h2 style="margin-bottom: 20px; color: #1976D2;">üìä Project Completion Tracking</h2>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 30px;">
                        <div style="background: #E3F2FD; padding: 16px; border-radius: 8px;">
                            <div style="font-size: 12px; color: #666; margin-bottom: 4px;">Total Examples</div>
                            <div style="font-size: 32px; font-weight: bold; color: #1976D2;">${summary.total_examples}</div>
                        </div>
                        <div style="background: #E8F5E9; padding: 16px; border-radius: 8px;">
                            <div style="font-size: 12px; color: #666; margin-bottom: 4px;">Assigned</div>
                            <div style="font-size: 32px; font-weight: bold; color: #4CAF50;">${summary.assigned_examples}</div>
                        </div>
                        <div style="background: #FFF3E0; padding: 16px; border-radius: 8px;">
                            <div style="font-size: 12px; color: #666; margin-bottom: 4px;">Completed</div>
                            <div style="font-size: 32px; font-weight: bold; color: #FF9800;">${summary.completed_examples}</div>
                        </div>
                        <div style="background: #F3E5F5; padding: 16px; border-radius: 8px;">
                            <div style="font-size: 12px; color: #666; margin-bottom: 4px;">Approved</div>
                            <div style="font-size: 32px; font-weight: bold; color: #9C27B0;">${summary.approved_examples}</div>
                        </div>
                    </div>
                    
                    <h3 style="margin-bottom: 16px;">Annotators Progress</h3>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f5f5;">
                                <th style="padding: 12px; text-align: left;">User</th>
                                <th style="padding: 12px; text-align: center;">Assigned</th>
                                <th style="padding: 12px; text-align: center;">Completed</th>
                                <th style="padding: 12px; text-align: center;">Progress</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${annotators.map(a => `
                                <tr style="border-bottom: 1px solid #eee;">
                                    <td style="padding: 12px;">${a.username}</td>
                                    <td style="padding: 12px; text-align: center;">${a.assigned_count}</td>
                                    <td style="padding: 12px; text-align: center;">${a.completed_count}</td>
                                    <td style="padding: 12px;">
                                        <div style="background: #eee; border-radius: 4px; overflow: hidden; height: 20px;">
                                            <div style="background: #4CAF50; height: 100%; width: ${a.completion_rate}%;"></div>
                                        </div>
                                        <span style="font-size: 11px; color: #666;">${a.completion_rate}%</span>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
                
                main.appendChild(section);
                console.log('[Monlam Metrics] Matrix injected');
            });
        }
    }
    
    // Get example ID from Doccano's Vue app state or DOM
    function getExampleIdFromPage() {
        // Try 1: Get from Vue app's $route query params
        const urlParams = new URLSearchParams(window.location.search);
        const pageParam = urlParams.get('page');
        
        // Try 2: Look for example ID in the DOM (Doccano displays it somewhere)
        const exampleText = document.body.textContent;
        const idMatch = exampleText.match(/ID[:\s]+(\d+)/i) || 
                       exampleText.match(/Example[:\s]+(\d+)/i) ||
                       exampleText.match(/#(\d+)/);
        if (idMatch) {
            console.log('[Monlam Approve] Found example ID in DOM:', idMatch[1]);
            return idMatch[1];
        }
        
        // Try 3: Get from API responses (listen to network)
        // This will be populated when example data loads
        return null;
    }
    
    // FEATURE 4: APPROVE/REJECT BUTTONS
    function addApproveButtons() {
        const path = window.location.pathname;
        const isAnnotationPage = path.includes('/speech-to-text') || path.match(/\/projects\/\d+\/(\d+)$/);
        
        if (!isAnnotationPage) {
            console.log('[Monlam Approve] Not on annotation page:', path);
            return;
        }
        
        console.log('[Monlam Approve] Detected annotation page:', path);
        CONFIG.projectId = getProjectId();
        
        // Try to get example ID from path first
        const pathMatch = path.match(/\/projects\/\d+\/(\d+)/);
        let exampleId = pathMatch ? pathMatch[1] : null;
        
        // If not in path, try to get from page content
        if (!exampleId) {
            exampleId = getExampleIdFromPage();
        }
        
        if (!exampleId) {
            console.log('[Monlam Approve] Could not determine example ID, will retry...');
            // Retry after DOM updates
            setTimeout(addApproveButtons, 2000);
            return;
        }
        
        console.log('[Monlam Approve] Example ID:', exampleId, 'Project ID:', CONFIG.projectId);
        
        // Try multiple injection strategies
        function injectButtons() {
            if (document.querySelector('.monlam-approve-btns')) return;
            
            // First, fetch the current approval status
            fetch(`/v1/projects/${CONFIG.projectId}/assignments/${exampleId}/`)
                .then(r => r.ok ? r.json() : null)
                .catch(() => null)
                .then(assignment => {
                    createButtonContainer(assignment);
                });
        }
        
        function createButtonContainer(assignment) {
            if (document.querySelector('.monlam-approve-btns')) return;
            
            const container = document.createElement('div');
            container.className = 'monlam-approve-btns';
            container.style.cssText = `
                margin: 16px 0;
                padding: 16px;
                background: #f5f5f5;
                border-radius: 8px;
                border-left: 4px solid #1976D2;
            `;
            
            // Build status indicators
            let statusHTML = '';
            
            if (assignment) {
                const statusColor = {
                    'assigned': '#999',
                    'in_progress': '#2196F3',
                    'submitted': '#FF9800',
                    'approved': '#4CAF50',
                    'rejected': '#F44336'
                };
                
                const statusIcon = {
                    'assigned': '‚è≥',
                    'in_progress': 'üîÑ',
                    'submitted': 'üì§',
                    'approved': '‚úÖ',
                    'rejected': '‚ùå'
                };
                
                // Determine approval status from assignment status
                let approvalStatus = 'pending';
                let approvalColor = '#999';
                let approvalIcon = '‚è≥';
                
                if (assignment.status === 'submitted') {
                    approvalStatus = 'Pending Review';
                    approvalColor = '#FF9800';
                    approvalIcon = 'üìã';
                } else if (assignment.status === 'approved') {
                    approvalStatus = 'Approved';
                    approvalColor = '#4CAF50';
                    approvalIcon = '‚úÖ';
                } else if (assignment.status === 'rejected') {
                    approvalStatus = 'Rejected';
                    approvalColor = '#F44336';
                    approvalIcon = '‚ùå';
                } else {
                    approvalStatus = 'Not Submitted';
                }
                
                statusHTML = `
                    <div style="margin-bottom: 12px; padding: 12px; background: white; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                        <div style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600;">üìã Approval Status Chain:</div>
                        <div style="display: flex; gap: 16px; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 150px;">
                                <div style="font-size: 11px; color: #666; margin-bottom: 4px;">üë§ Annotator</div>
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <span style="font-size: 16px;">${statusIcon[assignment.status] || '‚è≥'}</span>
                                    <span style="color: ${statusColor[assignment.status] || '#999'}; font-weight: 600; font-size: 12px;">${assignment.status.replace('_', ' ').toUpperCase()}</span>
                                </div>
                                <div style="font-size: 10px; color: #999; margin-top: 2px;">${assignment.assigned_to_username || 'Unknown'}</div>
                            </div>
                            <div style="flex: 1; min-width: 150px;">
                                <div style="font-size: 11px; color: #666; margin-bottom: 4px;">‚úì Approver</div>
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <span style="font-size: 16px;">${approvalIcon}</span>
                                    <span style="color: ${approvalColor}; font-weight: 600; font-size: 12px;">${approvalStatus.toUpperCase()}</span>
                                </div>
                                <div style="font-size: 10px; color: #999; margin-top: 2px;">
                                    ${assignment.reviewed_by_username || 'Not reviewed'}
                                    ${assignment.reviewed_at ? '<br>(' + new Date(assignment.reviewed_at).toLocaleDateString() + ')' : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = `
                ${statusHTML}
                <div style="display: flex; gap: 12px; align-items: center; padding-top: 8px; border-top: 1px solid #ddd;">
                    <span style="font-weight: 600; color: #666; margin-right: auto;">üîç Review Actions:</span>
                    <button class="approve-btn" style="background: #4CAF50; color: white; border: none; padding: 12px 24px; border-radius: 6px; font-weight: 600; cursor: pointer; box-shadow: 0 2px 8px rgba(76,175,80,0.3); transition: all 0.2s;">
                        ‚úì Approve
                    </button>
                    <button class="reject-btn" style="background: #F44336; color: white; border: none; padding: 12px 24px; border-radius: 6px; font-weight: 600; cursor: pointer; box-shadow: 0 2px 8px rgba(244,67,54,0.3); transition: all 0.2s;">
                        ‚úó Reject
                    </button>
                </div>
            `;
            
            // Add hover effects
            const approveBtn = container.querySelector('.approve-btn');
            const rejectBtn = container.querySelector('.reject-btn');
            
            approveBtn.onmouseenter = () => approveBtn.style.transform = 'scale(1.05)';
            approveBtn.onmouseleave = () => approveBtn.style.transform = 'scale(1)';
            rejectBtn.onmouseenter = () => rejectBtn.style.transform = 'scale(1.05)';
            rejectBtn.onmouseleave = () => rejectBtn.style.transform = 'scale(1)';
            
            approveBtn.onclick = () => {
                approveBtn.disabled = true;
                approveBtn.style.opacity = '0.6';
                approveBtn.textContent = '‚è≥ Approving...';
                
                fetch(`/v1/projects/${CONFIG.projectId}/assignments/approver-completion/${exampleId}/approve/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'X-CSRFToken': getCsrfToken() },
                    body: JSON.stringify({ review_notes: '' })
                }).then(r => {
                    if (r.ok) {
                        approveBtn.textContent = '‚úÖ Approved!';
                        approveBtn.style.background = '#81C784';
                        rejectBtn.disabled = true;
                        rejectBtn.style.opacity = '0.3';
                    } else {
                        approveBtn.textContent = '‚ùå Failed';
                        approveBtn.disabled = false;
                        approveBtn.style.opacity = '1';
                    }
                }).catch(e => {
                    console.error('[Monlam Approve] Error:', e);
                    approveBtn.textContent = '‚ùå Error';
                    approveBtn.disabled = false;
                    approveBtn.style.opacity = '1';
                });
            };
            
            rejectBtn.onclick = () => {
                const notes = prompt('Please provide a reason for rejection:');
                if (!notes) return;
                
                rejectBtn.disabled = true;
                rejectBtn.style.opacity = '0.6';
                rejectBtn.textContent = '‚è≥ Rejecting...';
                
                fetch(`/v1/projects/${CONFIG.projectId}/assignments/approver-completion/${exampleId}/reject/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'X-CSRFToken': getCsrfToken() },
                    body: JSON.stringify({ review_notes: notes })
                }).then(r => {
                    if (r.ok) {
                        rejectBtn.textContent = '‚úó Rejected';
                        rejectBtn.style.background = '#E57373';
                        approveBtn.disabled = true;
                        approveBtn.style.opacity = '0.3';
                    } else {
                        rejectBtn.textContent = '‚ùå Failed';
                        rejectBtn.disabled = false;
                        rejectBtn.style.opacity = '1';
                    }
                }).catch(e => {
                    console.error('[Monlam Approve] Error:', e);
                    rejectBtn.textContent = '‚ùå Error';
                    rejectBtn.disabled = false;
                    rejectBtn.style.opacity = '1';
                });
            };
            
            // Debug: Log what elements are available
            console.log('[Monlam Approve] Searching for injection points...');
            const toolbar = document.querySelector('.v-toolbar, header');
            const main = document.querySelector('main, .v-main__wrap, .v-content__wrap');
            const body = document.body;
            
            console.log('[Monlam Approve] Found toolbar:', !!toolbar);
            console.log('[Monlam Approve] Found main:', !!main);
            
            // Strategy 1: Insert after toolbar
            if (toolbar && toolbar.parentNode) {
                toolbar.parentNode.insertBefore(container, toolbar.nextSibling);
                console.log('[Monlam Approve] ‚úÖ Buttons added (after toolbar)');
                return true;
            }
            
            // Strategy 2: Insert at top of main
            if (main && main.firstChild) {
                main.insertBefore(container, main.firstChild);
                console.log('[Monlam Approve] ‚úÖ Buttons added (top of main)');
                return true;
            }
            
            // Strategy 3: Append to main
            if (main) {
                main.appendChild(container);
                console.log('[Monlam Approve] ‚úÖ Buttons added (in main)');
                return true;
            }
            
            // Strategy 4: Append to body (last resort)
            if (body) {
                container.style.position = 'fixed';
                container.style.top = '80px';
                container.style.right = '20px';
                container.style.zIndex = '9999';
                container.style.width = 'auto';
                body.appendChild(container);
                console.log('[Monlam Approve] ‚úÖ Buttons added (fixed to body)');
                return true;
            }
            
            console.log('[Monlam Approve] ‚ùå No injection point found');
            return false;
        }
        
        // Try multiple times with increasing delay, then use interval
        let attempts = 0;
        const maxAttempts = 20;
        
        const tryInject = () => {
            attempts++;
            const success = injectButtons();
            if (success) {
                console.log('[Monlam Approve] Success on attempt', attempts);
                return true;
            }
            if (attempts >= maxAttempts) {
                console.log('[Monlam Approve] Failed after', maxAttempts, 'attempts');
                return false;
            }
            return false;
        };
        
        // Initial attempts
        setTimeout(tryInject, 500);
        setTimeout(tryInject, 1000);
        setTimeout(tryInject, 1500);
        setTimeout(tryInject, 2000);
        
        // Persistent polling for up to 10 seconds
        const interval = setInterval(() => {
            const success = tryInject();
            if (success || attempts >= maxAttempts) {
                clearInterval(interval);
            }
        }, 500);
    }
    
    function getCsrfToken() {
        const name = 'csrftoken';
        const cookies = document.cookie.split(';');
        for (let cookie of cookies) {
            const [key, value] = cookie.trim().split('=');
            if (key === name) return decodeURIComponent(value);
        }
        return '';
    }
    
    // INITIALIZATION
    // Check if user is project admin
    function isProjectAdmin() {
        // Check if user has admin/owner role
        // Look for admin indicators in the page
        const userMenu = document.querySelector('[data-test="user-menu"], .navbar-item');
        if (userMenu && userMenu.textContent.includes('Admin')) return true;
        
        // Check URL params
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('admin') === 'true') return true;
        
        // Check localStorage for role info
        try {
            const userRole = localStorage.getItem('userRole');
            if (userRole === 'admin' || userRole === 'project_admin') return true;
        } catch(e) {}
        
        return false;
    }
    
    // Intercept menu clicks for redirect
    function interceptMenuClicks() {
        console.log('[Monlam] Setting up menu intercept...');
        
        // Intercept clicks on links (capture phase to run before Vue)
        document.addEventListener('click', function(e) {
            const link = e.target.closest('a');
            if (!link) return;
            
            const href = link.getAttribute('href') || link.href;
            if (!href) return;
            
            // Check if it's a dataset or metrics link
            const match = href.match(/\/projects\/(\d+)\/(dataset|metrics)/);
            if (match) {
                const projectId = match[1];
                const page = match[2];
                
                // EXCEPTION 1: Don't redirect if this is auto-annotate navigation
                // (coming from enhanced dataset to annotate specific example)
                if (page === 'dataset' && localStorage.getItem('monlam_auto_annotate_trigger') === 'true') {
                    console.log('[Monlam] Auto-annotate in progress, skipping dataset redirect');
                    return; // Let navigation proceed to dataset page
                }
                
                // EXCEPTION 2: Don't redirect dataset page for project admins
                // (they need upload/download buttons on original page)
                if (page === 'dataset' && isProjectAdmin()) {
                    console.log('[Monlam] Project admin detected, skipping dataset redirect');
                    return; // Let Vue handle it normally
                }
                
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                
                const redirectUrl = page === 'dataset' 
                    ? `/monlam/${projectId}/dataset-enhanced/`
                    : `/monlam/${projectId}/completion/`;
                
                console.log(`[Monlam] Intercepted ${page} click, redirecting to:`, redirectUrl);
                window.location.href = redirectUrl;
                return false;
            }
        }, true); // Use capture phase to run BEFORE Vue
        
        console.log('[Monlam] Menu intercept active');
    }
    
    // Check if on dataset/metrics page and redirect
    function checkAndRedirect() {
        const path = window.location.pathname;
        const match = path.match(/^\/projects\/(\d+)\/(dataset|metrics)/);
        
        if (match) {
            const projectId = match[1];
            const page = match[2];
            
            // EXCEPTION 1: Don't redirect if this is auto-annotate navigation
            // (coming from enhanced dataset to annotate specific example)
            if (page === 'dataset' && localStorage.getItem('monlam_auto_annotate_trigger') === 'true') {
                console.log('[Monlam] Auto-annotate in progress, skipping automatic redirect');
                return;
            }
            
            // EXCEPTION 2: Don't redirect dataset page for project admins
            if (page === 'dataset' && isProjectAdmin()) {
                console.log('[Monlam] Project admin detected, skipping automatic redirect');
                return;
            }
            
            const redirectUrl = page === 'dataset' 
                ? `/monlam/${projectId}/dataset-enhanced/`
                : `/monlam/${projectId}/completion/`;
            
            console.log(`[Monlam] On ${page} page, redirecting to:`, redirectUrl);
            window.location.replace(redirectUrl);
        }
    }
    
    // AUTO-ANNOTATE SPECIFIC EXAMPLE (when coming from enhanced dataset)
    function autoAnnotateExample() {
        const shouldAutoAnnotate = localStorage.getItem('monlam_auto_annotate_trigger');
        
        if (shouldAutoAnnotate === 'true') {
            const targetExampleId = localStorage.getItem('monlam_auto_annotate_example_id');
            
            console.log(`[Monlam] Auto-annotate requested for example ${targetExampleId}`);
            
            // Clear flags immediately
            localStorage.removeItem('monlam_auto_annotate_trigger');
            localStorage.removeItem('monlam_auto_annotate_example_id');
            
            // Check if we're on the dataset page
            const isDatasetPage = window.location.pathname.includes('/dataset');
            
            if (!isDatasetPage) {
                console.log('[Monlam] Not on dataset page, skipping auto-annotate');
                return;
            }
            
            console.log('[Monlam] On dataset page, will search for example', targetExampleId);
            console.log('[Monlam] Strategy: Search visible examples first, then try Start Annotation as fallback');
            
            // Wait for Vue to render the table
            let attempts = 0;
            const maxAttempts = 20;
            
            const findAndClickAnnotateButton = () => {
                attempts++;
                console.log(`[Monlam] Attempt ${attempts}/${maxAttempts} to find example row...`);
                
                // Try to find the correct row and its Annotate button
                // Strategy: Look for rows in the table and find the one with matching ID
                const tableRows = document.querySelectorAll('tr, .v-data-table__wrapper tbody tr');
                
                console.log(`[Monlam] Found ${tableRows.length} rows in table`);
                
                // Debug: Log first few rows to see what IDs are visible
                if (attempts === 1 && tableRows.length > 0) {
                    console.log('[Monlam] Sample of visible rows:');
                    for (let i = 0; i < Math.min(5, tableRows.length); i++) {
                        const rowText = tableRows[i].textContent.substring(0, 100);
                        console.log(`  Row ${i}: ${rowText}...`);
                    }
                }
                
                let foundButton = null;
                
                for (const row of tableRows) {
                    const rowText = row.textContent;
                    // Check if this row contains the target example ID
                    if (rowText.includes(targetExampleId)) {
                        console.log('[Monlam] ‚úÖ Found row containing example', targetExampleId);
                        console.log('[Monlam] Row content:', rowText.substring(0, 200));
                        
                        // Find Annotate button in this row
                        const rowButtons = row.querySelectorAll('button, a.v-btn, .v-btn, a');
                        console.log(`[Monlam] Found ${rowButtons.length} buttons/links in row`);
                        
                        for (const btn of rowButtons) {
                            const btnText = btn.textContent.trim().toLowerCase();
                            console.log(`[Monlam] Checking button: "${btnText}"`);
                            if (btnText.includes('annotate') || btnText.includes('‡Ωò‡ΩÜ‡Ωì‡ºã‡Ω†‡ΩÇ‡Ωº‡Ωë') || btnText.includes('review')) {
                                foundButton = btn;
                                console.log('[Monlam] ‚úÖ This is the Annotate button!');
                                break;
                            }
                        }
                        if (foundButton) break;
                    }
                }
                
                if (foundButton) {
                    console.log('[Monlam] ‚úÖ Found Annotate button for example', targetExampleId);
                    console.log('[Monlam] Auto-clicking button...');
                    foundButton.click();
                    return true;
                }
                
                // If not found and we haven't exceeded max attempts, try again
                if (attempts < maxAttempts) {
                    console.log('[Monlam] Example not visible in table yet, retrying in 500ms...');
                    setTimeout(findAndClickAnnotateButton, 500);
                } else {
                    console.log('[Monlam] ‚ö†Ô∏è Could not find example', targetExampleId, 'in table after', maxAttempts, 'attempts');
                    console.log('[Monlam] Possible reasons:');
                    console.log('  - Example is on a different page (pagination)');
                    console.log('  - Table not fully loaded');
                    console.log('  - Example ID not visible in table');
                    
                    // FALLBACK: Try to at least start annotation (won't go to specific example, but better than nothing)
                    console.log('[Monlam] Fallback: Looking for "Start Annotation" button...');
                    const allButtons = document.querySelectorAll('button, a.v-btn, .v-btn');
                    for (const btn of allButtons) {
                        const btnText = btn.textContent.trim().toLowerCase();
                        if (btnText.includes('start annotation') || btnText.includes('annotate')) {
                            console.log('[Monlam] Found Start Annotation button, clicking as fallback');
                            btn.click();
                            return true;
                        }
                    }
                    
                    console.log('[Monlam] ‚ùå Fallback also failed. User must navigate manually.');
                    console.log('[Monlam] TIP: User can use the "Start Annotation" button or search for example', targetExampleId);
                }
                
                return false;
            };
            
            // Start searching after initial delay
            setTimeout(findAndClickAnnotateButton, 1500);
        }
    }
    
    function init() {
        console.log('[Monlam] Initializing features...');
        console.log('[Monlam] Current path:', window.location.pathname);
        
        // Set up menu intercept FIRST
        interceptMenuClicks();
        
        // Check if we need to redirect
        checkAndRedirect();
        
        // Check if we should auto-annotate a specific example
        autoAnnotateExample();
        
        setTimeout(() => {
            enableAudioLoop();
            addDatasetColumns();
            addMetricsMatrix();
            // TEMPORARILY DISABLED: addApproveButtons();
            // Approve buttons are interfering with annotation interface
            // Will fix properly later
            checkAndRedirect(); // Check again after Vue loads
        }, 1000);
        
        let lastPath = window.location.pathname;
        setInterval(() => {
            if (window.location.pathname !== lastPath) {
                lastPath = window.location.pathname;
                console.log('[Monlam] Navigation detected:', lastPath);
                checkAndRedirect(); // Check on every navigation
                setTimeout(() => {
                    enableAudioLoop();
                    addDatasetColumns();
                    addMetricsMatrix();
                    addApproveButtons();
                }, 500);
            }
        }, 500);
    }
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
    
    console.log('[Monlam Inline] Features script loaded');
})();
  </script>
</body>

</html>